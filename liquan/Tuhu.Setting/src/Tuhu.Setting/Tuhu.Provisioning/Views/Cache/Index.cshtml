@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section head{
    <link href="~/Scripts/jquery-ui-timepicker-addon/jquery-ui-timepicker-addon.min.css" rel="stylesheet" />
    <style>
        span.name {
            font-size: 16px;
            font-weight: bold;
            left: 0;
        }
        input[type=text]{
            width:150px;
        }
    </style>
}
<div style="float:left;">
    <h2>刷新缓存</h2>
</div>
<div style="clear:both;"></div>
<div>
    <span class="name">更新限时抢购缓存：</span>
    <input type="text" name="FlashSaleStartDate" id="FlashSaleStartDate" readonly value="" />
    <input type="text" name="FlashSaleEndDate" id="FlashSaleEndDate" readonly value="" />
    <button onclick="Cache.UpdateFlashSale()">更新</button>
</div>

@section scripts{
    <script src="~/Scripts/jquery-ui-timepicker-addon/jquery-ui-timepicker-addon.min.js"></script>
    <script>
        //时间选择控件
        $("#FlashSaleStartDate").datetimepicker({
            timeFormat: "HH:mm",
            dateFormat: "yy-mm-dd",
            monthNames: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],

        });
        $("#FlashSaleEndDate").datetimepicker({
            timeFormat: "HH:mm",
            dateFormat: "yy-mm-dd",
            monthNames: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],

        });

        var Cache = {
            UpdateFlashSale: function () {
                var startTime=$("#FlashSaleStartDate").val(),
                    endTime=$("#FlashSaleEndDate").val();
                if(!startTime.length||!endTime.length)
                {
                    alert("时间不可为空！！");
                    return false;
                }

                $.post("/Cache/UpdateFlashSale", {
                    StartTime: startTime,
                    EndTime: endTime
                }, function (result) {
                    if (result == -1)
                        alert("更新失败");
                    else if (result == 1)
                        alert("更新成功");
                });
            },

        };
    </script>
}
