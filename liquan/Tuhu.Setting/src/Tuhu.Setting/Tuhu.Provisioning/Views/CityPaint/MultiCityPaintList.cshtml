@model Tuhu.Provisioning.DataAccess.Entity.MultiCityPaintModel

@{
    var title = "多城多价油漆";

    ViewBag.Title = title;
}
<style>
    .ui-dialog {
        border-radius: 3px;
        padding: 0px;
        width: auto;
    }

    .ui-dialog-grid {
        width: 100%;
    }

    .ui-dialog-title {
        width: 75%;
        padding: 8px 15px 8px 15px;
    }

    .ui-dialog-close {
        top: 8px;
    }

    .ui-dialog-body {
        padding: 10px;
    }

    .ui-dialog-content {
        padding: 0px;
    }

    .ui-dialog-footer {
        padding: 5px 10px 5px 5px;
        background: #ffffff;
        border-top: 1px solid #eee;
    }

        .ui-dialog-footer button {
            padding: 3px 15px;
            border-radius: 2px;
            box-shadow: 0 1px 1px rgba(0,0,0,.15);
            font-size: 12px;
        }

            .ui-dialog-footer button.ui-dialog-autofocus {
                font-weight: 700;
                text-shadow: 1px 1px 1px rgba(0,0,0,0.2);
            }

    .expanded_table_icon {
        background: url(/Scripts/TableTree/images/tree.gif) no-repeat 0px -4px;
        width: 9px;
        cursor: pointer;
        padding-top: 0px;
        margin: 0px;
        padding-left: 13px;
        zoom: 1;
    }

    .collapsed_table_icon {
        background: url(/Scripts/TableTree/images/tree.gif) no-repeat 0px -24px;
        width: 9px;
        cursor: pointer;
        padding-top: 0px;
        margin: 0px;
        padding-left: 13px;
        zoom: 1;
    }


    .button1 {
        border-radius: 5px;
        padding: 5px 25px;
        border: none;
        color: #F0F0F0;
        font-size: 12px;
        font-family: "Microsoft Yahei";
        outline: none;
        cursor: pointer;
        background: #0088cc;
        border-color: #0088cc;
    }

    table th {
        color: white;
        padding: 6px 5px;
        text-align: left;
        background-color: #0088cc;
        border: solid 1px #0088cc;
    }
</style>
<script src="../../Scripts/ajaxfileupload.js" type="text/javascript"></script>
<link rel="stylesheet" href="/Scripts/artDialog6.0.4/css/ui-dialog.css" />
<script src="~/Scripts/artDialog6.0.4/dist/dialog-min.js"></script>
<script src="~/Scripts/artDialog6.0.4/dist/dialog-plus-min.js"></script>

<link href="~/Scripts/jQuery-EasyUI/themes/default/easyui.css" type="text/css" rel="stylesheet" />
<link href="~/Scripts/jQuery-EasyUI/themes/icon.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="~/Scripts/jQuery-EasyUI/jquery.easyui.min.js"></script>
<script type="text/javascript" src="~/Scripts/jQuery-EasyUI/locale/easyui-lang-zh_CN.js"></script>
<script type="text/javascript" src="~/Scripts/layer/layer.js"></script>
<h2 style="">油漆产品全国价</h2>
<div id="LookOplog"></div>
<div id="countrypaintconfig" style="">
    <div id="countrypaintList">
        <div>
            <a class="button1" href="javascript:;" style="margin-bottom: 20px; float: left;" onclick="insertcountpaint();">添加</a>
        </div>
        <table id="paintList" style="text-align: center; width: 100%;">
            <tr>
                <th>油漆产品</th>
                <th>价格/标准面</th>
                <th>操作</th>
            </tr>
            @if (Model != null && Model.CountryPaintList != null)
            {
                foreach (var item in Model.CountryPaintList)
                {
                    <tr id="(@item.PKID)_tr">
                        <td style="display: none">@item.PKID</td>
                        <td style="width: 40%">@item.DisplayName</td>
                        <td style="width: 20%; font-family: Arial">&yen @item.Price</td>
                        <td style="width: 40%">
                            <a class="EditItem" value="@(item.PKID)" id="@(item.PKID)_Update" onclick="UpdateCountpaint(@(item.PKID))">编辑</a>
                            <a class="DeleteItem" value="@(item.PKID)" id="@(item.PKID)_Delete" onclick="DeleteCountryModel(@(item.PKID))">删除</a>
                        </td>
                    </tr>
                }
            }
        </table>
    </div>
</div>
<div id="EditItemDIV"></div>
<input type="hidden" id="hidObjectType" value="MultiCityPaint" />


<h2 style="">油漆产品特殊价</h2>
<div id="citypaintconfig" style="">
    <div id="citypaintList">
        <div>
            <a class="button1" href="javascript:;" style="margin-bottom: 20px; float: left;" onclick="insertcitypaint2();">添加</a>
        </div>
        <table id="paintList" style="text-align: center; width: 100%;">
            <tr>
                <th>城市</th>
                <th>油漆产品</th>
                <th>价格/标准面</th>
                <th>操作</th>
            </tr>
            @if (Model != null && Model.CityPaintList != null)
            {
                foreach (var item in Model.CityPaintList)
                {
                    <tr id="(@item.PKID)_tr">
                        <td style="display: none">@item.PKID</td>
                        <td style="width: 60%">@item.CityName</td>
                        <td style="width: 20%">@item.DisplayName</td>
                        <td style="width: 10%">¥@item.Price</td>
                        <td style="width: 10%">
                            <a class="EditItem" value="@(item.PKID)" id="@(item.PKID)_Update" onclick="UpdateCitypaint2(@(item.PKID))">编辑</a>
                            <a class="DeleteItem" value="@(item.PKID)" id="@(item.PKID)_Delete" onclick="DeleteCityModel(@(item.PKID))">删除</a>
                        </td>
                    </tr>
                }
            }
        </table>
    </div>
</div>

<script>

    function insertcountpaint() {
        window.location.href = "/CityPaint/CountryPaintItem";
        //var dialgpResult = dialog({
        //    height: 350,
        //    width: 700,
        //    title: "添加油漆产品全国价",
        //    button: [
        //    {
        //        value: "保存",
        //        callback: function () {
        //            $.ajax({
        //                type: "POST",
        //                url: "/CityPaint/InsertCountryPaintItem",
        //                data: {
        //                    "pid": $("#ddlType").val(),
        //                    "displayName": $("#ddlType option:selected").text(),
        //                    "price": $("#Price").val()
        //                },
        //                success: function (result) {
        //                    if (result) {
        //                        window.location.reload(true);
        //                    }
        //                    else {
        //                        alert("保存失败！");
        //                    }
        //                }
        //            });
        //        }
        //    },
        //    {
        //        value: "关闭"
        //    }]
        //});
        //$.ajax({
        //    url: "/CityPaint/CountryPaintItem",
        //    data: {  },
        //    type: "GET",
        //    success: function (result) {
        //        dialgpResult.content(result);
        //        dialgpResult.showModal();
        //    }
        //});
    };

    function UpdateCountpaint(e) {
        window.location.href = "/CityPaint/CountryPaintItem?pkid=" + e;
        //var dialgpResult = dialog({
        //    height: 200,
        //    width: 500,
        //    fixed: true,
        //    title: "编辑油漆产品全国价",
        //    button: [
        //    {
        //        value: "保存",
        //        callback: function () {
        //            $.ajax({
        //                type: "POST",
        //                url: "/CityPaint/UpdateCountryPaintItem",
        //                data: {
        //                    "pkid": e,
        //                    "pid": $("#ddlType").val(),
        //                    "displayName": $("#ddlType option:selected").text(),
        //                    "price": $("#Price").val()
        //                },
        //                success: function (result) {
        //                    if (result) {
        //                        alert("保存成功！");
        //                        window.location.reload(true);
        //                    }
        //                    else {
        //                        alert("保存失败！");
        //                    }
        //                }
        //            });
        //        }
        //    },
        //    {
        //        value: "关闭"
        //    }]
        //});
        //$.ajax({
        //    url: "/CityPaint/CountryPaintItem?pkid=" + e,
        //    data: { pkid: e },
        //    type: "GET",
        //    success: function (result) {
        //        dialgpResult.content(result);
        //        dialgpResult.showModal();
        //    }
        //});
    };

    function DeleteCountryModel(e) {
        if (confirm("确定要删除吗")) {
            $.ajax({
                type: "POST",
                url: "/CityPaint/DeleteCountryPaintItem",
                data: {
                    "pkid": e
                },
                success: function(result) {
                    if (result) {
                        alert("删除成功！");
                        window.location.reload(true);

                    } else {
                        alert("删除失败！");

                    }
                }
            });
        };
    }


    function insertcitypaint2() {
        window.location.href = "/CityPaint/CityPaintItem";
    };

    function UpdateCitypaint2(e) {
        window.location.href = "/CityPaint/CityPaintItem?pkid=" + e;
    };

    function insertcitypaint() {

        var dialgpResult = dialog({
            height: 350,
            width: 700,
            title: "添加油漆产品特殊价",
            button: [
            {
                value: "保存",
                callback: function () {

                    $.ajax({
                        type: "POST",
                        url: "/CityPaint/InsertCityPaintItem",
                        data: {
                            "pid": $("#ddlType").val(),
                            "displayName": $("#ddlType option:selected").text(),
                            "price": $("#Price").val(),
                            "pkids": null
                        },
                        success: function (result) {
                            if (result) {
                                window.location.reload(true);

                            }
                            else {
                                alert("保存失败！");

                            }
                        }
                    });

                }
            },
            {
                value: "关闭"
            }]
        });

        $.ajax({
            url: "/CityPaint/CityPaintItem",
            data: {},
            type: "GET",
            success: function (result) {

                dialgpResult.content(result);
                dialgpResult.showModal();

            }
        });
    };

    function UpdateCitypaint(e) {
        var dialgpResult = dialog({
            height: 200,
            width: 500,
            fixed: true,
            title: "编辑油漆产品特殊价",
            button: [
            {
                value: "保存",

                callback: function () {

                    $.ajax({
                        type: "POST",
                        url: "/CityPaint/UpdateCityPaintItem",
                        data: {
                            "pkid": e,
                            "pid": $("#ddlType").val(),
                            "displayName": $("#ddlType option:selected").text(),
                            "price": $("#Price").val(),
                            "pkids": null
                        },
                        success: function (result) {
                            if (result) {
                                alert("保存成功！");
                                window.location.reload(true);

                            }
                            else {
                                alert("保存失败！");

                            }
                        }
                    });

                }
            },
            {
                value: "关闭"
            }]
        });

        $.ajax({
            url: "/CityPaint/CityPaintItem?pkid=" + e,
            data: { pkid: e },
            type: "GET",
            success: function (result) {

                dialgpResult.content(result);
                dialgpResult.showModal();

            }
        });
    };

    function DeleteCityModel(e) {
        if (confirm("确定要删除吗")) {
            $.ajax({
                type: "POST",
                url: "/CityPaint/DeleteCityPaintItem",
                data: {
                    "pkid": e
                },
                success: function (result) {
                    if (result) {
                        alert("删除成功！");
                        window.location.reload(true);

                    }
                    else {
                        alert("删除失败！");

                    }
                }
            });
        };
    }

</script>
