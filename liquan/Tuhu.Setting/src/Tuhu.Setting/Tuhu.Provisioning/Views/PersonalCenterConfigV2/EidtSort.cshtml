@model Tuhu.Provisioning.DataAccess.Entity.PersonalCenterCouponConfig
@{
    ViewBag.Title = "EidtSort";
    Layout = null;
}

<div class="modal-dialog row ibox ibox-content">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
            &times;
        </button>
        <h4 class="modal-title">
            编辑优惠券顺序
        </h4>
    </div>
    <div class="modal-body">
        <table id="table1" class="table table-bordered" style="text-align:center;">
            <tbody>
                <tr>
                    <td>Id</td>
                    <td><input type="number" name="Id" value="@Model.Id" readonly="readonly" /></td>

                </tr>
                <tr>
                    <td>顺序</td>
                    <td><input type="number" name="Sort" value="@Model.Sort" /></td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="modal-footer">
        <div class="row" style="text-align:right;margin-bottom:5px;">
            <a href="javascript:void(0)" class="btn btn-primary " id="btnSave" data-toggle="modal" data-target="#edit"> 保 存</a>
            <a href="javascript:void(0)" class="btn btn-danger btn-small " data-toggle="modal" data-target="#edit">取 消</a>

        </div>
    </div>
</div>
<script>

    $("#btnSave").on("click", function () {

        $.ajax({
            method: 'POST',
            url: '/PersonalCenterConfigV2/UpdateSort',
            data: {
                "Id": $("input[name='Id']").val(),
                "Sort": $("input[name='Sort']").val()
            },
            dataType: 'json'
        }).done(function (result) { 
            if (result) {
                location.reload(true);
            } else {
                alert("顺序不能重复");
                return false;
            }
        });
        var dialog = $('#edit');
        dialog.empty();
    })
</script>
