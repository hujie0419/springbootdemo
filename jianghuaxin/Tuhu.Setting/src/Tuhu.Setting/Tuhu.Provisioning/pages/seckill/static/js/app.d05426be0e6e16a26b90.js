webpackJsonp([4],{"+skl":function(t,e){},"0mhl":function(t,e){},"9Q9G":function(t,e){},HkXY:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),n={props:{name:{type:String}},methods:{logout:function(){this.$emit("logout")}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[t._m(0),t._v(" "),a("div",{staticClass:"header-aside"},[a("Dropdown",{on:{"on-click":t.logout}},[a("a",{staticClass:"header-aside-main",attrs:{href:"javascript:void(0)"}},[a("Icon",{staticClass:"main-icon",attrs:{type:"ios-person"}}),t._v("\n          "+t._s(t.name)+"\n          "),a("Icon",{attrs:{type:"arrow-down-b"}})],1),t._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",[t._v("退出登录")])],1)],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"headerlogo"},[e("img",{staticClass:"header-logo-line",attrs:{src:"static/logo.png"}}),this._v(" "),e("div",{staticClass:"header-logo-title"},[e("h3",[this._v("途虎运营系统")]),this._v(" "),e("h4",[this._v("setting.tuhu.cn")])])])}]};var o=a("VU/8")(n,r,!1,function(t){a("pDZY")},null,null).exports,s={name:"setting-menu",props:{menus:{type:Array}},data:function(){return{searchVal:"",filteredMenus:[],openedmenus:[],shrinked:!1,activename:""}},watch:{$route:function(){this.setActiveName(this.$router.currentRoute.name)}},mounted:function(){this.filteredMenus=this.menus,this.setActiveName(this.$router.currentRoute.name)},methods:{goto:function(t){this.$router.push({name:t})},fliter:function(){var t=this.searchVal;this.filteredMenus=this.menus.filter(function(e){return e.name.indexOf(t)>=0}),this.updateOpenedMenus(this.util.array.select(this.filteredMenus,function(t){return t.key}))},updateOpenedMenus:function(t,e){this.openedmenus=t,e&&(this.activename=e),this.$nextTick(function(){this.$refs.orangeMenu.updateOpened(),this.$refs.orangeMenu.updateActiveName()})},setActiveName:function(t){var e;this.menus.forEach(function(a){a.children.forEach(function(i){i.key===t&&(e=a.key)})}),this.updateOpenedMenus([e],t)}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{nav:!t.shrinked}},[a("Input",{staticClass:"search",attrs:{icon:"ios-search",placeholder:"筛选一级目录"},on:{"on-enter":t.fliter,"on-click":t.fliter},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}}),t._v(" "),a("Menu",{ref:"orangeMenu",attrs:{width:"210px","open-names":t.openedmenus,"active-name":t.activename},on:{"on-select":t.goto}},t._l(t.filteredMenus,function(e,i){return a("Submenu",{key:i,attrs:{name:e.key}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:e.icon}}),t._v("\n                "+t._s(e.name)+"\n            ")],1),t._v(" "),t._l(e.children,function(e,i){return a("MenuItem",{key:i,attrs:{name:e.key}},[t._v("\n            "+t._s(e.name)+"\n            ")])})],2)})),t._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:t.shrinked,expression:"shrinked"}],staticClass:"hide",on:{click:function(e){t.shrinked=!t.shrinked}}},[t._v("收起")])],1)},staticRenderFns:[]};var c={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"footer"},[e("div",{staticClass:"footer-data"},[e("span",[this._v("所有内容为途虎养车网商业机密信息，切勿泄漏。版权所有 途虎养车网 2011-2015")])])])}]};var d={name:"App",data:function(){return{user:{name:""}}},computed:{menus:function(){return this.$store.state.app.menus},username:function(){return this.$store.state.user.name}},components:{settingheader:o,settingmenu:a("VU/8")(s,l,!1,function(t){a("HkXY")},null,null).exports,settingfooter:a("VU/8")({},c,!1,function(t){a("ROvl")},null,null).exports},methods:{logout:function(){var t=location.hostname.replace("yunying","yewu").replace("setting","yewu");window.location.href=location.protocol+"//"+t+"/Account/LogOff"}}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("settingheader",{attrs:{name:this.username},on:{logout:this.logout}}),this._v(" "),e("settingmenu",{attrs:{menus:this.menus}}),this._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"real-content"},[e("router-view")],1),this._v(" "),e("div",{staticStyle:{height:"50px"}}),this._v(" "),e("settingfooter")],1)],1)},staticRenderFns:[]};var h,p,g=a("VU/8")(d,u,!1,function(t){a("0mhl")},null,null).exports,f=a("BTaQ"),y=a.n(f),v=(a("+skl"),a("9Q9G"),a("mvHQ")),m=a.n(v),D=a("//Fk"),w=a.n(D),P=a("mtWM"),k=a.n(P),S={};S.title=function(t){t=t||"途虎运营配置系统",window.document.title=t},k.a.interceptors.request.use(function(t){return p.start(),t},function(t){return p.error(),w.a.reject(t)}),k.a.interceptors.response.use(function(t){console.log(t);var e=/Msg[\s|\S]*[-]*.*IsPower/;return e.test(t.data)&&S.message.error({content:t.data.match(e)[0].replace("Msg:","").replace(",IsPower",""),duration:10,closable:!0}),p.finish(),t},function(t){p.error(),h.error({content:m()(t.response.data),duration:10,closable:!0})}),S.ajax=k.a,S.axiosInstance=k.a.create(),S.useMessage=function(t){h=t},S.useLoadingbar=function(t){p=t},S.message=h,S.array={},S.array.select=function(t,e){var a=[];return t.forEach(function(t,i){a.push(e(t))}),a},S.deepCopy=function(t){return JSON.parse(m()(t))};var I=S,b=a("NYxO"),x={namespaced:!0,state:{menu:{menus:[],openedmenus:[],shrinked:[]},user:{name:"",permission:[]}},mutations:{init:function(t,e){console.log(e),t.menus=e}}},_={namespaced:!0,state:{name:"",permissions:[]},mutations:{logout:function(t){},init:function(t,e){t.name=e.name,t.permissions=e.permissions}}};i.default.use(b.a);var F=new b.a.Store({state:{},mutations:{},actions:{},modules:{app:x,user:_}}),C=[{key:"1",name:"价格配置",icon:"ios-speedometer",children:[{key:"seckillindex",name:"天天秒杀"}]}];i.default.use(y.a),i.default.config.productionTip=!1,i.default.prototype.ajax=I.ajax,i.default.prototype.util=I,console.log(i.default.prototype.$Message),I.useMessage(i.default.prototype.$Message),i.default.prototype.$Loading.config({color:"#2ca9e1",failedColor:"#c9171e",height:2}),I.useLoadingbar(i.default.prototype.$Loading),I.ajax.get("/auth/GetBasicInformantion").then(function(t){if(t.data.success){F.commit("user/init",t.data.user),F.commit("app/init",C);var e=a("YaEn").default;e.beforeEach(function(t,e,a){(y.a.LoadingBar.start(),I.title(t.meta.title),console.log("pat"+t.meta.authpath),t.meta.authpath)?I.axiosInstance.get("/auth/haspower?path="+t.meta.authpath).then(function(t){t.data.success&&t.data.result?a():a({path:"/403"})}).catch(function(t){console.log(t),y.a.LoadingBar.error(),a({path:"/500"})}):a()}),e.afterEach(function(t){console.log("finish"),y.a.LoadingBar.finish()}),new i.default({el:"#app",router:e,store:F,components:{App:g},template:"<App/>"})}else{var n=location.hostname.replace("yunying","yewu").replace("setting","yewu");window.location.href=location.protocol+"//"+n+"/Account/LogOn?ReturnUrl="+location.href}})},R7bG:function(t,e){},ROvl:function(t,e){},XGVO:function(t,e){},YaEn:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),n=a("/ocq"),r={data:function(){var t=this;return{columns:[{title:"场次",key:"Schedule",align:"center",render:function(t,e){return t("div",[t("span",{style:{align:"center"}},e.row.Schedule)])}},{title:"周一",key:"Day1",align:"center",render:function(e,a){var i=t.getclass(a.row.Day1.Status),n=t.getclass2(a.row.Day1.Status);return 1===a.row.Day1.Status?e("div",[e("Icon",{props:{type:"android-add"}}),e("strong",{on:{click:function(){t.toedit(a.row.Day1)}}},"新建")]):a.row.Day1.IsDefault?e("div",{style:n},[e("div",[e("span",{on:{click:function(){t.toedit(a.row.Day1)}}},a.row.Day1.StrStatus)]),e("div",[e("span","默认配置")])]):e("div",{style:i},[e("div",[e("span",{on:{click:function(){t.toedit(a.row.Day1)}}},a.row.Day1.StrStatus)]),e("div",[e("span",a.row.Day1.Count+"个产品")])])}},{title:"周二",key:"Day2",align:"center",render:function(e,a){var i=t.getclass(a.row.Day2.Status),n=t.getclass2(a.row.Day2.Status);return 1===a.row.Day2.Status?e("div",[e("Icon",{props:{type:"android-add"}}),e("strong",{on:{click:function(){t.toedit(a.row.Day2)}}},"新建")]):a.row.Day2.IsDefault?e("div",{style:n},[e("div",[e("span",{on:{click:function(){t.toedit(a.row.Day2)}}},a.row.Day2.StrStatus)]),e("div",[e("span","默认配置")])]):e("div",{style:i},[e("div",[e("span",{on:{click:function(){t.toedit(a.row.Day2)}}},a.row.Day2.StrStatus)]),e("div",[e("span",a.row.Day2.Count+"个产品")])])}},{title:"周三",key:"Day3",align:"center",render:function(e,a){var i=t.getclass(a.row.Day3.Status),n=t.getclass2(a.row.Day3.Status);return 1===a.row.Day3.Status?e("div",[e("Icon",{props:{type:"android-add"}}),e("strong",{on:{click:function(){t.toedit(a.row.Day3)}}},"新建")]):a.row.Day3.IsDefault?e("div",{style:n},[e("div",[e("span",{on:{click:function(){t.toedit(a.row.Day3)}}},a.row.Day3.StrStatus)]),e("div",[e("span","默认配置")])]):e("div",{style:i},[e("div",[e("span",{on:{click:function(){t.toedit(a.row.Day3)}}},a.row.Day3.StrStatus)]),e("div",[e("span",a.row.Day3.Count+"个产品")])])}},{title:"周四",key:"Day4",align:"center",render:function(e,a){var i=t.getclass(a.row.Day4.Status),n=t.getclass2(a.row.Day4.Status);return 1===a.row.Day4.Status?e("div",[e("Icon",{props:{type:"android-add"}}),e("strong",{on:{click:function(){t.toedit(a.row.Day4)}}},"新建")]):a.row.Day4.IsDefault?e("div",{style:n},[e("div",[e("span",{on:{click:function(){t.toedit(a.row.Day4)}}},a.row.Day4.StrStatus)]),e("div",[e("span","默认配置")])]):e("div",{style:i},[e("div",[e("span",{on:{click:function(){t.toedit(a.row.Day4)}}},a.row.Day4.StrStatus)]),e("div",[e("span",a.row.Day4.Count+"个产品")])])}},{title:"周五",key:"Day5",align:"center",render:function(e,a){var i=t.getclass(a.row.Day5.Status),n=t.getclass2(a.row.Day5.Status);return 1===a.row.Day5.Status?e("div",[e("Icon",{props:{type:"android-add"}}),e("strong",{on:{click:function(){t.toedit(a.row.Day5)}}},"新建")]):a.row.Day5.IsDefault?e("div",{style:n},[e("div",[e("span",{on:{click:function(){t.toedit(a.row.Day5)}}},a.row.Day5.StrStatus)]),e("div",[e("span","默认配置")])]):e("div",{style:i},[e("div",[e("span",{on:{click:function(){t.toedit(a.row.Day5)}}},a.row.Day5.StrStatus)]),e("div",[e("span",a.row.Day5.Count+"个产品")])])}},{title:"周六",key:"Day6",align:"center",render:function(e,a){var i=t.getclass(a.row.Day6.Status),n=t.getclass2(a.row.Day6.Status);return 1===a.row.Day6.Status?e("div",[e("Icon",{props:{type:"android-add"}}),e("strong",{on:{click:function(){t.toedit(a.row.Day6)}}},"新建")]):a.row.Day6.IsDefault?e("div",{style:n},[e("div",[e("span",{on:{click:function(){t.toedit(a.row.Day6)}}},a.row.Day6.StrStatus)]),e("div",[e("span","默认配置")])]):e("div",{style:i},[e("div",[e("span",{on:{click:function(){t.toedit(a.row.Day6)}}},a.row.Day6.StrStatus)]),e("div",[e("span",a.row.Day6.Count+"个产品")])])}},{title:"周日",key:"Day7",align:"center",render:function(e,a){var i=t.getclass(a.row.Day7.Status),n=t.getclass2(a.row.Day7.Status);return 1===a.row.Day7.Status?e("div",[e("Icon",{props:{type:"android-add"}}),e("strong",{on:{click:function(){t.toedit(a.row.Day7)}}},"新建")]):a.row.Day7.IsDefault?e("div",{style:n},[e("div",[e("a",{on:{click:function(){t.toedit(a.row.Day7)}}},a.row.Day7.StrStatus)]),e("div",[e("span","默认配置")])]):e("div",{style:i},[e("div",[e("a",{on:{click:function(){t.toedit(a.row.Day7)}}},a.row.Day7.StrStatus)]),e("div",[e("span",a.row.Day7.Count+"个产品")])])}},{title:"默认配置",key:"Default",align:"center",render:function(e,a){var i=t.getclass(a.row.Default.Status);return 1===a.row.Default.Status?e("div",[e("Icon",{props:{type:"android-add"}}),e("strong",{on:{click:function(){t.toedit(a.row.Default)}}},"新建")]):e("div",{style:i},[e("div",[e("span",{on:{click:function(){t.toedit(a.row.Default)}}},a.row.Default.StrStatus)]),e("div",[e("span",a.row.Default.Count+"个产品")])])}}],data:[],loading:!0,page:{total:5,current:1,pageSize:5},dt:new Date,FooterDay:"",options1:{shortcuts:[{text:"Today",value:function(){return new Date},onClick:function(e){t.$Message.info("Click today")}},{text:"Yesterday",value:function(){var t=new Date;return t.setTime(t.getTime()-864e5),t},onClick:function(e){t.$Message.info("Click yesterday")}},{text:"One week",value:function(){var t=new Date;return t.setTime(t.getTime()-6048e5),t},onClick:function(e){t.$Message.info("Click a week ago")}}]}}},created:function(){this.loadData()},methods:{search:function(){this.loadData()},loadData:function(){var t=this,e={dt:this.dt.toString()};this.ajax.get("/Seckill/GetSeckillList",{params:e}).then(function(e){t.data=e.data.result,t.FooterDay=e.data.FooterDay,t.loading=!1})},toedit:function(t){this.$router.push({name:"seckillEdit",query:{activityId:t.ActivityId,schedule:t.Schedule,shortDate:t.ShortDate,isDefault:t.IsDefault,strStatus:t.StrStatus}})},getclass:function(t){switch(t){case 1:return{"background-color":"white",color:"black","text-align":"center","line-height":"45px"};case 2:return{"background-color":"white",color:"red","text-align":"center","line-height":"45px"};case 3:return{"background-color":"paleturquoise",color:"black","text-align":"center","line-height":"45px"};case 4:return{"background-color":"yellow",color:"red","text-align":"center","line-height":"45px"};case 5:return{"background-color":"paleturquoise",color:"black","font-weight":"bold","text-align":"center","line-height":"45px"};case 6:return{"background-color":"#cccccc",color:"black","text-align":"center","line-height":"45px"}}},getclass2:function(t){switch(t){case 5:return{"background-color":"paleturquoise",color:"red","text-align":"center","line-height":"45px"};case 6:return{"background-color":"#cccccc",color:"red","text-align":"center","line-height":"45px"}}}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[t._v("价格配置> 天天秒杀")]),t._v(" "),a("div",[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",options:t.options1,placeholder:"选择日期",format:"yyyy-MM-dd"},model:{value:t.dt,callback:function(e){t.dt=e},expression:"dt"}}),t._v(" "),a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.search}},[t._v("搜索")])],1),t._v(" "),a("div",{staticStyle:{"margin-top":"18px"}},[a("Table",{attrs:{data:t.data,columns:t.columns,loading:t.loading,border:""}}),t._v(" "),a("div",{staticStyle:{"margin-left":"500px","margin-top":"10px",overflow:"hidden"}},[a("Tag",{attrs:{type:"border",color:"blue"}},[t._v(t._s(t.FooterDay))])],1)],1)])},staticRenderFns:[]};var s=a("VU/8")(r,o,!1,function(t){a("XGVO")},null,null).exports,l=a("mvHQ"),c=a.n(l),d={data:function(){var t=this;return{shortDate:"",schedule:"",strStatus:"",wrongMsg:[],disabled:!0,btndisabled:!1,errorcolumns:[{title:"PID",key:"PID",width:100},{title:"错误信息",key:"msgInfo",render:function(t,e){return t("span",{style:{color:"Red"},domProps:{innerHTML:e.row.msgInfo}},e.row.msgInfo)}}],columns:[{title:"PID",key:"PID",fixed:"left",width:180,render:function(e,a){return e("Input",{props:{type:"text",value:t.data[a.index].PID,disabled:t.disabled},on:{"on-blur":function(e){t.data[a.index].PID=e.target.value,t.PIDcheck2(a.index)}}})}},{title:"排序",key:"Position",render:function(e,a){return e("Input",{props:{value:a.row.Position,disabled:t.disabled},on:{"on-blur":function(e){t.data[a.index].Position=e.target.value}}})}},{title:"秒杀标题",key:"ProductName",width:200,render:function(e,a){return e("Input",{props:{type:"text",value:a.row.ProductName,disabled:t.disabled},on:{"on-blur":function(e){t.data[a.index].ProductName=e.target.value}}})}},{title:"成本价",key:"CostPrice",render:function(t,e){return e.row.CostPrice}},{title:"产品价",key:"OriginalPrice",render:function(t,e){return e.row.OriginalPrice}},{title:"秒杀价",key:"Price",render:function(e,a){return e("Input",{props:{value:a.row.Price,disabled:t.disabled},on:{"on-blur":function(e){t.data[a.index].Price=e.target.value,t.checkPrice(a.index)}}})}},{title:"伪原价",key:"FalseOriginalPrice",render:function(e,a){return e("Input",{props:{value:a.row.FalseOriginalPrice,disabled:t.disabled},on:{"on-blur":function(e){t.data[a.index].FalseOriginalPrice=e.target.value}}})}},{title:"降价幅度",key:"DecreaseDegree",render:function(t,e){return t("span",{style:{color:"Red"}},e.row.DecreaseDegree)}},{title:"每人限购",key:"MaxQuantity",render:function(e,a){return e("Input",{props:{value:a.row.MaxQuantity,disabled:t.disabled},on:{"on-blur":function(e){t.data[a.index].MaxQuantity=e.target.value}}})}},{title:"秒杀库存",key:"TotalQuantity",render:function(e,a){return e("Input",{props:{value:a.row.TotalQuantity,disabled:t.disabled},on:{"on-blur":function(e){t.data[a.index].TotalQuantity=e.target.value}}})}},{title:"优惠券",key:"IsUsePCode",render:function(e,a){return e("i-switch",{props:{type:"primary",size:"large",value:a.row.IsUsePCode,disabled:t.disabled},on:{"on-change":function(e){t.UpdateIsUsePCode(a.index,e)}}})}},{title:"显示",key:"IsShow",render:function(e,a){return e("i-switch",{props:{type:"primary",size:"large",value:a.row.IsShow,disabled:t.disabled},on:{"on-change":function(e){t.UpdateIsShow(a.index,e)}}})}},{title:"销量",key:"SaleOutQuantity"},{title:"错误信息",key:"Error",render:function(t,e){return t("span",{style:{color:"Red"}},e.row.Error)}},{title:"操作",key:"action",fixed:"right",width:80,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"error",size:"small",disabled:t.disabled},on:{click:function(){t.remove(a.index)}}},"删除")])}}],editInlineColumns:[{title:"PID",key:"PID",align:"center",render:function(e,a){return e("Input",{props:{value:a.row.PID},on:{input:function(e){t.editInlineData[a.index].PID=e,console.log(e)},"on-blur":function(){t.PIDcheck2(a.index)}}})}},{title:"排序",key:"Position",align:"center",editable:!0},{title:"秒杀标题",key:"ProductName",align:"center",editable:!0},{title:"图片",key:"ImageUrl",align:"center",render:function(t,e){return t("img",{domProps:{src:e.row.ImageUrl}})}},{title:"成本价",key:"CostPrice",render:function(t,e){return e.row.CostPrice}},{title:"产品价",key:"OriginalPrice",render:function(t,e){return e.row.OriginalPrice}},{title:"*秒杀价",key:"Price",align:"center",editable:!0},{title:"伪原价",key:"FalseOriginalPrice",align:"center",editable:!0},{title:"降价幅度",key:"DecreaseDegree"},{title:"*每人限购",key:"MaxQuantity",align:"center",editable:!0},{title:"*秒杀库存",key:"TotalQuantity",align:"center",editable:!0},{title:"*优惠券",key:"IsUsePCode",align:"center",editable:!0},{title:"*显示",key:"IsShow",align:"center"},{title:"*销量",key:"SaleOutQuantity"},{title:"操作",align:"center",width:200,key:"handle",handle:["edit","delete"]}],editInlineData:[],data:[],logmodal:{loading:!0,visible:!1,width:800,data:[],columns:[{title:"时间",width:200,key:"CreateDateTime",align:"center",fixed:"left",render:function(e,a){return e("span",t.formatDate(a.row.CreateDateTime))}},{title:"操作人",width:100,key:"Name",align:"center"},{title:"操作类型",width:150,key:"Title",align:"center",fixed:"left"},{title:"修改备注",width:300,key:"Remark",align:"center",fixed:"left",render:function(t,e){return t("span",{style:{color:"Red"},domProps:{innerHTML:e.row.Remark}},e.row.Remark)}}]},origiondata:[],modal:{visible:!1,width:500,title:"",editType:"",formValidate:{PID:"",Sort:"",ImageUrl:"",ProductName:"",CostPrice:"",OriginalPrice:"",Price:"",FalseOriginalPrice:"",DecreaseDegree:"",MaxQuantity:"",TotalQuantity:"",IsUsePCode:"",IsShow:"",SaleOutQuantity:""}}}},created:function(){this.loadEditData()},computed:{DecreaseDegree:function(){if(this.OriginalPrice.length&&this.Price.length)return(100*parseFloat(Math.abs(parseFloat(this.OriginalPrice)-parseFloat(this.Price))/parseFloat(this.OriginalPrice)).toFixed(2)).toString("0%")}},watch:{Price:function(t){this.OriginalPrice.length&&(this.DecreaseDegree=(100*parseFloat(Math.abs(parseFloat(this.OriginalPrice)-parseFloat(this.Price))/parseFloat(this.OriginalPrice)).toFixed(2)).toString("0%"))},OriginalPrice:function(t){this.Price.length&&(this.DecreaseDegree=(100*parseFloat(Math.abs(parseFloat(this.OriginalPrice)-parseFloat(this.Price))/parseFloat(this.OriginalPrice)).toFixed(2)).toString("0%"))}},methods:{loadEditData:function(){if(this.activityId=this.$route.query.activityId,this.schedule=this.$route.query.schedule,this.shortDate=this.$route.query.shortDate,this.isDefault=this.$route.query.isDefault,this.strStatus=this.$route.query.strStatus,"新建"!==this.strStatus&&"已发布"!==this.strStatus&&"售卖中"!==this.strStatus&&"已驳回"!==this.strStatus||(this.disabled=!1,this.btndisabled=!0),this.data=[],null!=this.activityId){var t={activityId:this.activityId,isDefault:this.isDefault,strStatus:this.strStatus},e=this;this.ajax.get("/Seckill/GetEditDatasByActivityId",{params:t}).then(function(t){e.data=t.data,e.origiondata=JSON.parse(c()(t.data))})}},formatPrice:function(t){return"￥"+t},update:function(t){},remove:function(t){this.data.splice(t,1)},toGetLog:function(){var t=this;this.logmodal.loading=!0,this.ajax.post("/Seckill/GetLogList",{activityId:this.activityId}).then(function(e){t.logmodal.data=e.data,t.logmodal.visible=!0,t.logmodal.loading=!1})},handleSuccess:function(t,e){var a=this;t.data.forEach(function(t,e){var i=this;a.data.push({PID:t.PID,Position:t.Position,ImageUrl:"",ProductName:t.ProductName,CostPrice:"",OriginalPrice:"",Price:t.Price,FalseOriginalPrice:t.FalseOriginalPrice,DecreaseDegree:"",MaxQuantity:t.MaxQuantity,TotalQuantity:t.TotalQuantity,IsUsePCode:t.IsUsePCode,IsShow:t.IsShow,SaleOutQuantity:0,Channel:"all",IsJoinPlace:0,InstallService:t.InstallService,Error:""});var n="",r=0,o=0;a.data.forEach(function(e,a){e.PID===t.PID&&(r=a,o++)}),o>1?a.data[r].Error="产品配置重复了":(a.data[r].Error="",a.ajax.get("/Seckill/FetchProductWithCostPriceByPID",{params:{PID:a.data[r].PID,activityId:a.activityId}}).then(function(t){if(null===t.data.PID&&(n="无此产品编号"),t.data.CaseSensitive&&(n="请跟产品库配置大小写一致"),(t.data.OnSale||t.data.Stockout)&&(n="此产品下架或缺货"),n.length&&(a.data[r].Error=n),!n.length){!a.data[r].ProductName.length>1&&(a.data[r].ProductName=t.data.DisplayName),a.data[r].ImageUrl=t.data.Image,a.data[r].CostPrice=t.data.CostPrice,a.data[r].OriginalPrice=t.data.cy_list_price,a.data[r].Price.length>1||(a.data[r].Price=t.data.cy_list_price),a.data[r].FalseOriginalPrice.length>1||(a.data[r].FalseOriginalPrice=t.data.cy_list_price),a.data[r].DecreaseDegree="";var e=a.data[r].Price,o=a.data[r].OriginalPrice;if(isNaN(e)&&(a.data[r].Error="秒杀价请输入正确的数字格式"),o>0){(parseFloat(e)<=0||parseFloat(e)>parseFloat(o))&&(a.data[r].Error+="秒杀价高于原价，请查看是否配置错误");var s=parseFloat(Math.abs(parseFloat(o)-parseFloat(e))/parseFloat(o)).toFixed(2);i.data[r].DecreaseDegree=i.toPercent(s)}}}))})},updateValue:function(t){this.$emit("input",t)},toload:function(){window.location.href="/Content/QiangGou/ExportSeckillExcel.xlsx"},toupload:function(){},toCreate:function(){this.data.push({PID:"",Position:"",ImageUrl:"",ProductName:"",CostPrice:"",OriginalPrice:"",Price:"",FalseOriginalPrice:"",DecreaseDegree:"",MaxQuantity:"",TotalQuantity:"",IsUsePCode:!1,IsShow:!1,SaleOutQuantity:0,Channel:"all",IsJoinPlace:0,InstallService:"",Error:""})},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(a){a?(e.data.push(e.modal.formValidate),e.$refs[t].resetFields(),e.$Message.success("Success!")):e.$Message.error("Fail!")})},handleReset:function(t){this.$refs[t].resetFields()},fetchProductByPID:function(t,e){var a=this,i="";this.ajax.get("/Seckill/FetchProductByPID",{async:!1,params:{PID:t,activityId:""}}).then(function(t){null===t.data.PID&&(i="无此产品编号"),t.data.CaseSensitive&&(i="请跟产品库配置大小写一致"),(t.data.OnSale||t.data.Stockout)&&(i="此产品下架或缺货"),""===i&&(a.modal.formValidate.ProductName=t.data.DisplayName,a.modal.formValidate.ImageUrl=t.data.ImageUrl,a.modal.formValidate.CostPrice=100,a.modal.formValidate.OriginalPrice=t.data.cy_list_price),e(i)})},UpdateIsShow:function(t,e){this.data[t].IsShow=e},UpdateIsUsePCode:function(t,e){this.data[t].IsUsePCode=e},toSave:function(){var t=this,e=!1,a=this,i=0;if(null===!this.activityId&&(e=!0),this.origiondata.length!==this.data.length&&(e=!0),e||(console.log("1"+this.origiondata),console.log("2"+this.data),this.origiondata.forEach(function(e){t.data.forEach(function(t){e.PID===t.PID&&(i++,e.Price>t.Price&&i--)})}),i!==this.origiondata.length&&(e=!0),console.log(i)),a.wrongMsg=[],a.data.length){if(a.data.forEach(function(t,e){console.log("i: ",e,t);var i="";if(null!=t.Position&&t.Position.length&&parseInt(t.Position)+""=="NaN"&&(i+="排序填写不规范<br/>"),t.Price.toString().length?isNaN(t.Price)?i+="秒杀价请输入正确的数字格式<br/>":(parseFloat(t.Price)<=0||parseFloat(t.Price)>parseFloat(t.OriginalPrice))&&(i+="秒杀价高于原价，请查看是否配置错误<br/>"):i+="秒杀价不允许为空<br/>",t.FalseOriginalPrice.toString().length?isNaN(t.FalseOriginalPrice)?i+="伪原价请输入正确的数字格式<br/>":(parseFloat(t.FalseOriginalPrice)<=0||parseFloat(t.FalseOriginalPrice)<parseFloat(t.Price))&&(i+="伪原价低于产品价，请查看是否配置错误<br/>"):i+="伪原价不允许为空<br/>",t.MaxQuantity.length&&parseInt(t.MaxQuantity)+""=="NaN"&&(i+="个人限购数量请输入正确的数字格式<br/>"),t.TotalQuantity.toString().length||(i+="秒杀库存不允许为空<br/>"),t.TotalQuantity.length&&parseInt(t.TotalQuantity)+""=="NaN"&&(i+="秒杀库存请输入正确的数组格式<br/>"),t.TotalQuantity<t.MaxQuantity&&(i+="每人限购的数量高于秒杀库存，请确认<br/>"),i.length)return a.wrongMsg.push({PID:t.PID,msgInfo:i}),!1}),0===a.wrongMsg.length){var n={ActivityID:this.activityId,ActivityName:this.schedule,IsDefault:this.isDefault,ShortDate:this.shortDate,NeedExam:e,strStatus:this.strStatus};this.ajax.post("/Seckill/Save",{strModel:c()(n),products:c()(a.data),originProducts:c()(a.origiondata)}).then(function(e){1===e.data.Status?(t.$Message.success(e.data.Message),t.$router.push({name:"seckillindex"})):t.$Message.error(e.data.Message)})}}else a.wrongMsg.push({PID:"",msgInfo:"请添加商品"})},toApprovePass:function(){var t=this;this.ajax.post("/Seckill/ExamActivity",{aid:this.activityId}).then(function(e){1===e.data.code?(t.$Message.success("审核成功"),t.$router.push({name:"seckillindex"})):t.$Message.error("审核失败")})},toApproveBack:function(){var t=this;this.ajax.post("/Seckill/ApproveBack",{aid:this.activityId}).then(function(e){1===e.data.code?(t.$Message.success("驳回成功"),t.$router.push({name:"seckillindex"})):t.$Message.error("驳回失败")})},toPercent:function(t){var e=Number(100*t).toFixed(2);return e+="%"},checkPrice:function(t){this.data[t].Error="",this.data[t].DecreaseDegree="";var e=this.data[t].Price,a=this.data[t].OriginalPrice;if(isNaN(e)&&(this.data[t].Error="秒杀价请输入正确的数字格式"),a>0){(parseFloat(e)<=0||parseFloat(e)>parseFloat(a))&&(this.data[t].Error="秒杀价高于原价，请查看是否配置错误");var i=parseFloat(Math.abs(parseFloat(a)-parseFloat(e))/parseFloat(a)).toFixed(2);this.data[t].DecreaseDegree=this.toPercent(i)}},checkoriginPrice:function(t){this.data[t].Error="",this.data[t].DecreaseDegree="";var e=this.data[t].Price,a=this.data[t].OriginalPrice;isNaN(a)&&(this.data[t].Error="秒杀价请输入正确的数字格式"),e.length&&((parseFloat(e)<=0||parseFloat(e)>parseFloat(a))&&(this.data[t].Error="秒杀价高于原价，请查看是否配置错误"),this.data[t].DecreaseDegree=parseFloat(Math.abs(parseFloat(a)-parseFloat(e))/parseFloat(a)).toFixed(2).toString("0%"))},PIDcheck2:function(t){var e="",a=this;a.data[t].Error="",this.ajax.get("/Seckill/FetchProductWithCostPriceByPID",{params:{PID:a.data[t].PID,activityId:a.activityId}}).then(function(i){null===i.data.PID&&(e="无此产品编号"),i.data.CaseSensitive&&(e="请跟产品库配置大小写一致"),i.data.OnSale&&!i.data.Stockout||(e="此产品下架或缺货"),e.length&&(a.data[t].Error=e),e.length||(a.data[t].ProductName.length>1||(a.data[t].ProductName=i.data.DisplayName),a.data[t].ImageUrl=i.data.Image,a.data[t].CostPrice=i.data.CostPrice,a.data[t].InstallService=i.data.InstallService,a.data[t].OriginalPrice=i.data.cy_list_price,a.data[t].Price.length>1||(a.data[t].Price=i.data.cy_list_price),a.data[t].FalseOriginalPrice.length>1||(a.data[t].FalseOriginalPrice=i.data.cy_list_price))})},handleNetConnect:function(t){this.breakConnect=t},handleLowSpeed:function(t){this.lowNetSpeed=t},getCurrentData:function(){this.showCurrentTableData=!0},handleDel:function(t,e){this.$Message.success("删除了第"+(e+1)+"行数据")},handleCellChange:function(t,e,a){this.$Message.success("修改了第 "+(e+1)+" 行列名为 "+a+" 的数据")},handleChange:function(t,e){this.$Message.success("修改了第"+(e+1)+"行数据")},formatDate:function(t){if(null==t)return null;var e=new Date(parseInt(t.replace("/Date(","").replace(")/",""))),a=e.getFullYear(),i=e.getDate();return a+"-"+(e.getMonth()+1)+"-"+i+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Breadcrumb",{attrs:{separator:">"}},[a("BreadcrumbItem",[t._v("价格配置")]),t._v(" "),a("BreadcrumbItem",{attrs:{to:"/"}},[t._v("天天秒杀")]),t._v(" "),a("BreadcrumbItem",[t._v(t._s(t.shortDate)+"-"+t._s(t.schedule))]),t._v(" "),a("BreadcrumbItem",[t._v(t._s(t.strStatus))])],1),t._v(" "),a("div",{staticStyle:{margin:"10px"},attrs:{align:"left"}},[a("Table",{directives:[{name:"show",rawName:"v-show",value:t.wrongMsg.length>0,expression:"wrongMsg.length>0"}],attrs:{border:"",columns:t.errorcolumns,data:t.wrongMsg}})],1),t._v(" "),a("div",{staticStyle:{margin:"10px"},attrs:{align:"right"}},[a("Button",{staticStyle:{margin:"5px"},attrs:{type:"primary",shape:"circle",disabled:t.disabled,icon:"plus-round"},on:{click:t.toCreate}},[t._v("添加")]),t._v(" "),a("Button",{staticStyle:{margin:"5px"},attrs:{type:"primary",shape:"circle",icon:"refresh"},on:{click:t.toCreate}},[t._v("刷新缓存")]),t._v(" "),a("Button",{staticStyle:{margin:"5px"},attrs:{type:"primary",shape:"circle",icon:"ios-search"},on:{click:t.toGetLog}},[t._v("查看日志")]),t._v(" "),a("a",{attrs:{type:"primary",shape:"circle",disabled:t.disabled,icon:"arrow-down-c"},on:{click:t.toload}},[t._v("导入模板下载")]),t._v(" "),a("Upload",{attrs:{action:"/Seckill/ExportProducts/","on-success":t.handleSuccess}},[a("Button",{attrs:{type:"primary",disabled:t.disabled,shape:"circle",padding:"5px",icon:"ios-cloud-upload-outline"}},[t._v("上传文件")])],1)],1),t._v(" "),a("div",{staticStyle:{margin:"10px"},attrs:{align:"left"}}),t._v(" "),a("div",{staticStyle:{margin:"10px"}},[a("Table",{attrs:{border:"",columns:t.columns,data:t.data}})],1),t._v(" "),a("div",{staticStyle:{margin:"10px"},attrs:{align:"right"}},[a("Button",{attrs:{type:"primary",shape:"circle",disabled:t.disabled},on:{click:t.toSave}},[t._v("保存提交")]),t._v(" "),a("Button",{attrs:{type:"ghost",shape:"circle",disabled:t.btndisabled},on:{click:t.toApprovePass}},[t._v("审核通过")]),t._v(" "),a("Button",{attrs:{type:"ghost",shape:"circle",disabled:t.btndisabled},on:{click:t.toApproveBack}},[t._v("审核驳回")])],1),t._v(" "),a("Modal",{attrs:{title:"操作日志",width:t.logmodal.width},model:{value:t.logmodal.visible,callback:function(e){t.$set(t.logmodal,"visible",e)},expression:"logmodal.visible"}},[a("Table",{attrs:{loading:t.logmodal.loading,data:t.logmodal.data,columns:t.logmodal.columns,stripe:""}})],1)],1)},staticRenderFns:[]};var h=a("VU/8")(d,u,!1,function(t){a("R7bG")},null,null).exports;a.d(e,"page404",function(){return p}),a.d(e,"page403",function(){return g}),a.d(e,"page500",function(){return f}),i.default.use(n.a);var p={path:"/*",name:"error-404",meta:{title:"404-页面不存在"},component:function(){return a.e(0).then(a.bind(null,"LWjT"))}},g={path:"/403",meta:{title:"403-权限不足"},name:"error-403",component:function(){return a.e(1).then(a.bind(null,"J7+d"))}},f={path:"/500",meta:{title:"500-服务端错误"},name:"error-500",component:function(){return a.e(2).then(a.bind(null,"0Gql"))}};e.default=new n.a({routes:[{path:"/",redirect:"seckill/index"},{path:"/seckill/index",name:"seckillindex",component:s,meta:{title:"首页"}},{path:"/seckill/edit",name:"seckillEdit",component:h,meta:{title:"编辑"}},g,f,p]})},pDZY:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d05426be0e6e16a26b90.js.map