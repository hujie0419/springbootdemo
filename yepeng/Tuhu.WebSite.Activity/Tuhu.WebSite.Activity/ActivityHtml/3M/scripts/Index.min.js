function connectWebViewJavascriptBridge(n){window.WebViewJavascriptBridge?n(WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",function(){n(WebViewJavascriptBridge)},!1)}function Login(){userAgentInfo.indexOf("Android")>=0?window.WebViewJavascriptBridge.callHandler("actityBridge",{param:""},function(n){n!=null&&CallBackAppLoginResponse(n)}):iosend("CallBackAppLoginResponse")}function CallBackAppLoginResponse(n){var t=null,i;userAgentInfo.indexOf("Android")>=0?(t=JSON.parse(n),ProvinceName=t.Province,UserProvince=t.userProvince,UserCity=t.userCity,latitude=t.lat,longitude=t.lng):(t=n,ProvinceName=t.province,latitude=t.latitude,longitude=t.longitude);CityName=t.city;DistrictName=t.district;UserId=t.userid;Phone=t.phone;i={City:UserCity?UserCity:CityName,Province:UserProvince?UserProvince:ProvinceName,District:DistrictName,UserId:UserId,Uuid:t.uuid,Phone:Phone,latitude:latitude,longitude:longitude};SetCookie("UserloginObject3M",JSON.stringify(i));SelectCarObject(t.userid)}function iosend(n){window.location.href="tuhuaction://getuserinfo#1#"+encodeURIComponent(n)}function GetPailiang(n){$.ajax({url:DomainItem+"Car/SelectVehicle",type:"GET",data:{VehicleID:n,PaiLiang:"",Nian:""},dataType:"jsonp",async:!1,success:function(n){return n.Code=="1"?userAgentInfo.indexOf("Android")>=0&&window.WebViewJavascriptBridge.callHandler("setUserCarInfo",function(){}):n.Code=="0"&&NoneServer(),!1}})}function SelectCarObject(n){$.ajax({url:DomainItem+"CarHistory/SelectCarObject.html",type:"GET",data:{userID:n},dataType:"jsonp",async:!1,success:function(n){var t,r,o,s,e,u;if(n.Code=="1"&&n.CarHistory.length>0)for(t in n.CarHistory)if(n.CarHistory[t].IsDefaultCar=="1"){var h=n.CarHistory[t].CarID,c=n.CarHistory[t].LIYANGID,f=n.CarHistory[t].Nian,i=n.CarHistory[t].Pailiang;if(TID=n.CarHistory[t].TID,r=n.CarHistory[t].ProductID,Vehicle=n.CarHistory[t].Vehicle,o=n.CarHistory[t].Brand,VehicleLogin="http://image.tuhu.cn"+n.CarHistory[t].VehicleLogin,s=n.CarHistory[t].SalesName,$(".car-info .img img").attr("src",VehicleLogin),e=i+" "+f,$(".other .name").html(Vehicle),$(".other .type").html(e),i){Get3MDataList(r,i,f,TID);for(u in n.CarHistory[t])n.CarHistory[t][u]||delete n.CarHistory[t][u];SetCookie("SelectedCarDataFor3M",JSON.stringify(n.CarHistory[t]));break}else GetPailiang(r)}else{var h=n.CarHistory[0].CarID,c=n.CarHistory[0].LIYANGID,f=n.CarHistory[0].Nian,i=n.CarHistory[0].Pailiang;if(TID=n.CarHistory[0].TID,r=n.CarHistory[0].ProductID,Vehicle=n.CarHistory[0].Vehicle,o=n.CarHistory[0].Brand,VehicleLogin="http://image.tuhu.cn"+n.CarHistory[0].VehicleLogin,s=n.CarHistory[0].SalesName,$(".car-info .img img").attr("src",VehicleLogin),e=i+" "+f,$(".car-info .other .name").html(Vehicle),$(".car-info .other .type").html(e),i){Get3MDataList(r,i,f,TID);for(u in n.CarHistory[0])n.CarHistory[0][u]||delete n.CarHistory[0][u];SetCookie("SelectedCarDataFor3M",JSON.stringify(n.CarHistory[0]));break}else GetPailiang(r)}else userAgentInfo.indexOf("Android")>=0&&window.WebViewJavascriptBridge.callHandler("setUserCarInfo",function(){}),NoneServer()},error:function(){}})}function UniqueCategory(n){for(var i=[],r={},u=0,t;(t=n[u])!=null;u++)r[t]||(i.push(t),r[t]=!0);return i}function NoneServer(){$(".pack-list").html("<div style='font-size:14px;'>\u60a8\u7684\u7231\u8f66\u6682\u65e0\u6b64\u670d\u52a1\uff01<\/div>");$(".pack-list").css({"text-align":"center","margin-top":"45%",display:"block",color:"red"})}function Get3MDataList(n,t,i,r){$.ajax({method:"GET",url:"http://by.tuhu.cn/baoyang/Get3MPackages.html",data:{vehicleId:n,paiLiang:t,nian:i,tid:r},dataType:"jsonp"}).done(function(n){var t,i,r;if(n.length>0){PackagesDataAll=n;t=n;i=[];for(r in t)i.push(t[r].Category);for(r in UniqueCategory(i))$(".list").append("<li>"+UniqueCategory(i)[r]+"<\/li>");CreateHtml(t)}else NoneServer()}).fail(function(){})}function CreateHtml(n){var f,t,r,u,o,h,l;console.log(JSON.stringify(n[0]));window.name=JSON.stringify(n[0]);$(".pack-list").html("");f="";for(t in n){r="";for(u in n[t].InstallServiceses)if(n[t].InstallServiceses[u].PID==="FU-BY-BYQX|1"){r="jqxt";break}else if(n[t].InstallServiceses[u].PID==="FU-BY-BYQX|3"){r="pyz";break}else if(n[t].InstallServiceses[u].PID==="FU-BY-BYQX|2"){r="sanyuan";break}else if(n[t].InstallServiceses[u].PID==="FU-TU-FadongjiQXJ|1"){r="fdj";break}else{r="xby";break}var e=[],s="",c=n[t].Tips||"";for(e=c.split("\u3002"),i=0;i<e.length-1;i++)s+=e[i]+"\u3002<br>";o="";for(h in n[t].Items)o+='<div class="swiper-slide"><img src="'+n[t].Items[h].Image+'" /><\/div>';f='  <li><a><div class="info"><div class = "data"  style="display:none">'+JSON.stringify(n[t])+'<\/div>  <div class="img '+r+'"><\/div> <div class="name">'+n[t].DisplayName+'<span class="checkm"><\/span><\/div><div class="price"><span class="red">\u00a5'+n[t].Price+'<\/span> <span class="grey">\u00a5'+n[t].MarketPrice+'<\/span><\/div>   <div class="productimg"><div class="swiper-container"><div class="swiper-wrapper">'+o+'<\/div><\/div><span class="viewInfo" name-data="'+n[t].DisplayName+'">\u4ea7\u54c1\u8be6\u60c5<i class="i-arrow"><\/i><\/span> <\/div><\/div><div class="decs"><ul><li>'+s+"<\/li> <\/ul><\/div><\/a><\/li>";$(".pack-list").append(f);l=new Swiper(".swiper-container",{pagination:".swiper-pagination",slidesPerView:4.5,paginationClickable:!0,spaceBetween:4,freeMode:!0})}$(".pack-list .info").eq(0).addClass("selected")}function SelectByCategroy(n){var t=[],i;if(n=="\u5168\u90e8")t=PackagesDataAll;else for(i in PackagesDataAll)PackagesDataAll[i].Category==n&&t.push(PackagesDataAll[i]);CreateHtml(t)}function GetQueryString(n){var i=new RegExp("(^|&)"+n+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(i);return t!=null?unescape(t[2]):null}function SetCookie(n,t){var i=new Date;i.setTime(i.getTime()+864e5);document.cookie=n+"="+escape(t)+";path=/;expires="+i.toGMTString()}function GetCookie(n){var t=document.cookie.match(new RegExp("(^| )"+n+"=([^;]*)(;|$)"));return t!=null?unescape(t[2]):null}var userAgentInfo,PackagesDataAll;$(function(){$(".footer").on("click",function(n){console.log(JSON.stringify(window.name));window.name&&(window.location.href="/ActivityHtml/3M/shop.html");n.stopPropagation()});$(".pack-list").on("click",".info",function(n){$(this).addClass("selected");$(".pack-list .info").not(this).removeClass("selected");var t=$(this).find(".data").text();window.name=t;n.stopPropagation()});$(".pack-list").on("click",".viewInfo",function(n){var t=JSON.parse($(this).parent().parent().find(".data").text()),f=$(this).attr("name-data"),r="",i,u;for(i in t.Items)r+='<li><img src="'+t.Items[i].Image+'" width="100%"><div class="cont">'+t.Items[i].DisplayName+"<\/div><\/li>";u='  <div class="title"><p>'+f+'<\/p><span class="close"><\/span><\/div><div class="showList"><ul>'+r+"<\/ul><\/div>";$(".showBox .showInfo").html(u);$(".showBox").show();n.stopPropagation()});$(".showBox").on("click",".close",function(n){$(".showBox").hide();n.stopPropagation()});$(document).on({click:function(n){var t=n.target;if($(t).attr("class")&&$(t).attr("class")=="showInfo")return!1;$(".showBox").hide()}});$(".select").on("click",".value",function(){$(".select").not($(this).parents(".select")).removeClass("active");$(this).parents(".select").toggleClass("active")}).on("click",".list li",function(n){n.stopPropagation();var t=$(this).text();$(this).parents(".list").prev().children("span").text(t);$(".select").removeClass("active");SelectByCategroy(t)});Get3MDataList("VE-GM-S07BT","1.5L","2015","");SetCookie("UserloginObject3M",JSON.stringify({City:"\u4e0a\u6d77\u5e02",Province:"\u4e0a\u6d77\u5e02",District:"",UserId:"",Uuid:"",Phone:"18521709141",latitude:31.738919,longitude:121.409745}))});userAgentInfo=navigator.userAgent;connectWebViewJavascriptBridge(function(n){n.init(function(n,t){t({"Javascript Responds":"Wee!"})});n.registerHandler("functionInJs",function(n,t){t("Javascript Says Right back aka!")})});var TID="",VehicleLogin="",Vehicle="",UserId="",Phone="",ProvinceName="",CityName="",UserProvince="",UserCity="",DistrictName="",latitude="",longitude="",DomainItem="http://item.tuhu.cn/",arryZhiXiaSHi=["\u4e0a\u6d77\u5e02","\u5317\u4eac\u5e02","\u5929\u6d25\u5e02","\u91cd\u5e86\u5e02"];PackagesDataAll="";