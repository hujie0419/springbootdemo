<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>接口测试</title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <script src="http://resource.tuhu.cn/Scripts/jquery-2.1.0.js"></script>
    <script src="http://resource.tuhu.cn/Js/WebViewJavascriptBridge.js"></script>
    <script src="http://file.tuhu.cn/activity/scripts/jsonSerialization.js"></script>

    <style>
        body {
            font-family: 'Microsoft YaHei';
        }

        fieldset {
            border-color: rgb(248, 217, 86);
        }


        input {
            height: 40px;
            width: 90%;
            margin-top: 5px;
            border: none;
            color: #471406;
            font-size: 13px;
        }
    </style>
    <script type="text/javascript">

        var userAgentInfo = navigator.userAgent;
        function connectWebViewJavascriptBridge(callback) {
            if (window.WebViewJavascriptBridge) {
                callback(WebViewJavascriptBridge)
            } else {
                document.addEventListener(
                    'WebViewJavascriptBridgeReady'
                    , function () {
                        callback(WebViewJavascriptBridge)
                    },
                    false
                );
            }
        }
        connectWebViewJavascriptBridge(function (bridge) {
            bridge.init(function (message, responseCallback) {
                var data = {
                    'Javascript Responds': 'Wee!'
                };
                responseCallback(data);
            });
            bridge.registerHandler("functionInJs", function (data, responseCallback) {
                var responseData = "Javascript Says Right back aka!";
                responseCallback(responseData);
            });
        })



        function Marked_as_like(e) {

            alert(e);
        }


        function a1() {

            window.WebViewJavascriptBridge.callHandler(
               'toDiscoveryList'
                   , {
                       'CategoryId': 1
                   }
               , function (responseData) {
               })
        }

        function a2() {

            window.WebViewJavascriptBridge.callHandler(
               'Discoverylike'

               , function (responseData) {
               })
        }

        function a3() {

            window.WebViewJavascriptBridge.callHandler(
               'toDiscovery'
                   , {
                       'keyboard': 1
                   }
               , function (responseData) {
               })
        }

        function a4() {
            var str = {
                "Article": {
                    "TitleColor": "",
                    "CategoryName": "保养秘诀",
                    "ContentUrl": "http://image.tuhu.cn/activity/news/BA84E1F6-E440-42A4-B4F7-C4E640BA6503_1194.html",
                    "SmallImage": "http://image.tuhu.cn/activity/image/91c83235-953e-42bb-a880-9a222374d8d9_s.jpg",
                    "CommentNum": "17",
                    "PKID": 1194,
                    "AnnotationTime": "星期五",
                    "SmallTitle": "你不管刹车，别怪刹车也不管你",
                    "Brief": "",
                    "Source": "",
                    "PublishDateTime": "2015-09-25",
                    "PublishNewDateTime": "09月25日",
                    "Heat": 42971,
                    "ClickCount": "26207",
                    "BigTitle": "你不管刹车，别怪刹车也不管你",
                    "VoteState": true,
                    "RedirectUrl": "",
                    "Vote": 120,
                    "Image": "http://image.tuhu.cn/activity/image/698ac66d-959b-4416-a3fe-06d709727b29.jpg",
                    "Catalog": "0"
                }
            };

            window.WebViewJavascriptBridge.callHandler(
               'toDiscoveryDetailActivity'
                   ,
                     encodeURIComponent(encodeURIComponent(JSON.stringify(str)))

               , function (responseData) {
               })
        }



        //ios
        function sendCommandNew(controller, param) {
            var url = "tuhuDiscover://" + controller + "#" + param;
            window.document.location = url;
        }

        //function b1() {

        //    var prams = {
        //        "category": 1
        //    };

        //    sendCommandNew("THDiscoverTableVC", encodeURIComponent(JSON.stringify(prams)));
        //}

        //function b2() {
        //    sendCommandNew("vote", 1)
        //}

        //function b3() {
        //    var prams = {
        //        "commentUrl": "http://wxbanner.qiniudn.com/article_150424143645425.html",
        //        "mytitle": "阿尔法-罗密欧",
        //        "categoryName": "汽车备课",
        //        "pkid": "4",
        //        "showKeyboard": 1
        //    };
        //    sendCommandNew("THDiscoverCommentVC", encodeURIComponent(JSON.stringify(prams)))
        //}

        //function b4() {

        //    var prams = {
        //        "discoverModel<THDiscoverModel>":
        //            {
        //                "PKID": "28",
        //                "targetUrl": "http://wxbanner.qiniudn.com/article_150428162557122.html",
        //                "title": "车神",
        //                "category": "1",
        //                "commentCount": 45,
        //                "shareTitle": "富士山",
        //                "shareImage": "http://7sboir.com2.z0.glb.qiniucdn.com/article_150313181441780.jpg"
        //            }
        //    };

        //    sendCommandNew("THDiscoverWebView", encodeURIComponent(JSON.stringify(prams)))

        //}

        function b1() {

            var prams = {
                "category": "1"
            };

            window.location.href = "tuhuDiscover://segue#THDiscoverTableVC#" + encodeURIComponent(JSON.stringify(prams));
            //= encodeURIComponent(strurl);
        }

        function b2() {
            var url = "tuhuDiscover://vote#1";
            //window.document.location = encodeURIComponent(url);
            window.location.href = url;
            //window.open(url);
        }

        function b3() {
            var prams = {
                "commentUrl": "http://wxbanner.qiniudn.com/article_150424143645425.html",
                "mytitle": "阿尔法-罗密欧",
                "categoryName": "汽车备课",
                "pkid": "4",
                "showKeyboard": 1
            };
            var strurl = "tuhudiscover://segue#THDiscoverCommentVC#" + encodeURIComponent(JSON.stringify(prams));
            //window.location.href = encodeURIComponent(strurl);
            window.location.href = strurl;



        }

        function b4() {

            var prams = {
                "discoverModel<THDiscoverModel>":
                    {
                        "PKID": "28",
                        "targetUrl": "http://wxbanner.qiniudn.com/article_150428162557122.html",
                        "title": "车神",
                        "category": "1",
                        "commentCount": 45,
                        "shareTitle": "富士山",
                        "shareImage": "http://7sboir.com2.z0.glb.qiniucdn.com/article_150313181441780.jpg"
                    }
            };

            var str = "tuhuDiscover://segue#THDiscoverWebView#" + encodeURIComponent(JSON.stringify(prams));
            window.location.href = str
            //alert(str);
        }
    </script>

</head>
<body>

    <div style="text-align:center">
        <fieldset>
            <legend>android</legend>

            <input type="button" onclick="a1()" value="文章类目标签" />

            <input type="button" onclick="a2()" value="文章喜欢" />

            <input type="button" onclick="a3()" value="更多评论页面" />

            <input type="button" onclick="a4()" value="相关文章" />

        </fieldset>

        <fieldset style="margin-top:20px;">
            <legend>ios</legend>

            <input type="button" onclick="b1()" value="文章类目标签" />

            <input type="button" onclick="b2()" value="文章喜欢" />

            <input type="button" onclick="b3()" value="更多评论页面" />

            <input type="button" onclick="b4()" value="相关文章" />
        </fieldset>
    </div>

</body>

</html>
