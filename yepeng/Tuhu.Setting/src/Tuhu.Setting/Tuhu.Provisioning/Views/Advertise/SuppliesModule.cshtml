@using Tuhu.Provisioning.Business;
@{
    ViewBag.Title = "汽车用品模块管理";
    var SuppliesModuleList = ViewBag.SuppliesModule as IList<Tuhu.Provisioning.DataAccess.Entity.Advertise>;
    var WwwAdvertiseList = ViewBag.WwwAdvertise as IList<Tuhu.Provisioning.DataAccess.Entity.Advertise>;
    var WWW05 = ViewBag.WWW05 as IList<Tuhu.Provisioning.DataAccess.Entity.Advertise>;
    var WWW06 = ViewBag.WWW06 as IList<Tuhu.Provisioning.DataAccess.Entity.Advertise>;
    var WWW07 = ViewBag.WWW07 as IList<Tuhu.Provisioning.DataAccess.Entity.Advertise>;
    var WWW08 = ViewBag.WWW08 as IList<Tuhu.Provisioning.DataAccess.Entity.Advertise>;
    var WWW_ShanGou = ViewBag.WWW_ShanGou as IList<Tuhu.Provisioning.DataAccess.Entity.Advertise>;
    var BatteryBanner = ViewBag.BatteryBanner as IList<Tuhu.Provisioning.DataAccess.Entity.Advertise>;
    var QuickBanner=ViewBag.QuickBanner as IList<Tuhu.Provisioning.DataAccess.Entity.Advertise>;

    var Android001List = ViewBag.Android001List as IList<Tuhu.Provisioning.DataAccess.Entity.Advertise>;
    var Android002List = ViewBag.Android002List as IList<Tuhu.Provisioning.DataAccess.Entity.Advertise>;
    var Android003List = ViewBag.Android003List as IList<Tuhu.Provisioning.DataAccess.Entity.Advertise>;
    var IOS001List = ViewBag.IOS001List as IList<Tuhu.Provisioning.DataAccess.Entity.Advertise>;
    var IOS002List = ViewBag.IOS002List as IList<Tuhu.Provisioning.DataAccess.Entity.Advertise>;
    var IOS003List = ViewBag.IOS003List as IList<Tuhu.Provisioning.DataAccess.Entity.Advertise>;
    AutoSuppliesManager manager = new AutoSuppliesManager();
    Layout = "../Shared/_Layout.cshtml";
}

<style>
    .nodata {
        width: 98%;
        border: 4px solid #f0f0f0;
        color: #cccccc;
        font-size: 22px;
        font-weight: bold;
        line-height: 200px;
        margin: 0 auto;
        text-align: center;
    }


    .ModuleList, .ModuleList ul, .ModuleList ul li {
        width: 100%;
        float: left;
        list-style: none;
        padding: 0;
        margin: 0;
    }

        .ModuleList ul li {
            padding-right: 2%;
            padding-bottom: 20px;
            width: 18%;
            float: left;
        }

            .ModuleList ul li .box {
                height: auto;
                width: 100%;
                float: left;
            }

                .ModuleList ul li .box .picbox {
                    height: auto;
                    width: 98%;
                    border: 1px solid #dddddd;
                    float: left;
                    background-color: #FFFFCC;
                    -moz-border-radius: 5px 5px 0 0; /* Gecko browsers */
                    -webkit-border-radius: 5px 5px 0 0; /* Webkit browsers */
                    border-radius: 5px 5px 0 0;
                }

                .ModuleList ul li .box .addnew, .ModuleList ul li .box .addnew2 {
                    height: auto;
                    width: 100%;
                    text-align: center;
                    line-height: 160px;
                    float: left;
                    background-color: #5c87b2;
                    color: #ffffff;
                    font-size: 22px;
                    font-weight: bold;
                    -moz-border-radius: 5px; /* Gecko browsers */
                    -webkit-border-radius: 5px; /* Webkit browsers */
                    border-radius: 5px;
                }

                .ModuleList ul li .box .addnew2 {
                    line-height: 172px;
                }

                    .ModuleList ul li .box .addnew a, .ModuleList ul li .box .addnew2 a {
                        color: #ffffff;
                    }

                .ModuleList ul li .box .picbox .line1 {
                    height: 30px;
                    line-height: 30px;
                    width: 100%;
                    float: left;
                    font-weight: bold;
                }

                   .ModuleList ul li .box .picbox .line7 {
                    height: 30px;
                    line-height: 30px;
                    width: 100%;
                    float: left;
                    font-weight: bold;
                     background-color: white;
                }

                .ModuleList ul li .box .picbox .line2 {
                    height: 60px;
                    line-height: 60px;
                    width: 100%;
                    float: left;
                    font-weight: bold;
                    font-size: 28px;
                    text-align: center;
                    overflow: hidden;
                }

                .ModuleList ul li .box .picbox .line3 {
                    border-top: 1px solid #f0f0f0;
                    height: 30px;
                    line-height: 30px;
                    width: 100%;
                    float: left;
                    background-color: #FFFFCC;
                }

                    .ModuleList ul li .box .picbox .line3 a {
                        text-decoration: underline;
                    }

                .ModuleList ul li .box .picbox .line4 {
                    height: 40px;
                    line-height: 40px;
                    width: 100%;
                    float: left;
                    font-size: 15px;
                    text-align: center;
                    background-color: #5c87b2;
                    color: #ffffff;
                }

                    .ModuleList ul li .box .picbox .line4 a {
                        color: #ffffff;
                    }

                .ModuleList ul li .box .picbox .line5 {
                    height: 100px;
                    line-height: 100px;
                    width: 100%;
                    float: left;
                    font-weight: bold;
                    font-size: 22px;
                    text-align: center;
                    background-color: #F9F9F9;
                    overflow: hidden;
                    -moz-border-radius: 5px 5px 0 0; /* Gecko browsers */
                    -webkit-border-radius: 5px 5px 0 0; /* Webkit browsers */
                    border-radius: 5px 5px 0 0;
                }

                .ModuleList ul li .box .picbox .line6 {
                    border-top: 1px solid #f0f0f0;
                    height: 30px;
                    line-height: 30px;
                    width: 100%;
                    float: left;
                    background-color: #666666;
                }

                    .ModuleList ul li .box .picbox .line6 a {
                        text-decoration: none;
                        color: #ffffff;
                    }

    .fengefu {
        width: 100%;
        border-bottom: 2px solid #999999;
        clear: both;
    }
</style>
<script>
    function btnDelete(PKID) {
        if (confirm('确定要删除吗？删除后旗下的产品集合也会被删除!!!')) {
            $.ajax({
                type: "post",
                url: '/Advertise/DeleteItem',
                data: { "id": PKID },
                success: function (result) {
                    if (result == true) {
                        window.location.href = "/Advertise/SuppliesModule";
                    }
                }
            });
        }
    }

    function btnAdd(PKID, AdColumnID) {     
        if (PKID == 0) {
            $("#AddItem").load('/Advertise/AddSuppliesModule?adColumnID=' + AdColumnID);
        }
        else {
            $("#AddItem").load('/Advertise/AddSuppliesModule?id=' + PKID);
        }
        $("#AddItem").dialog({
            title: "汽车用品模块管理",
            width: 600,
            height: 680,
            modal: true,
            buttons: {
                "取消": function () {
                    $(this).dialog("close"); //当点击取消按钮时，关闭窗口
                }
            }
        });
    }
</script>

<div style="clear:both;"></div>
<h2>
    汽车用品模块管理
</h2>
<div class="ModuleList">
    <ul>
        @foreach (var item in SuppliesModuleList)
        {
            <li>
                <div class="box">
                    <div class="picbox">
                        <div class="line1">
                            <div style="float:left;padding-left:10px;">@Html.Raw(item.State == 1 ? "<font color=\"#006600\">已启用</font>" : "<font color=\"#FF0000\">已停用</font>")</div>
                            <div style="float:right;padding-right:10px;">
                                @{string _StatusName = manager.GetStatusName(item.BeginDateTime, item.EndDateTime);}
                                @Html.Raw((_StatusName == "时间已截止" ? "<font color=\"#FF0000\">" : "<font color=\"#006600\">") + _StatusName + "</font>")
                            </div>
                        </div>
                        <div class="line2" title="@item.Name">@item.Name</div>
                        <div class="line3">
                            <div style="float:left;padding-left:10px;"><a href="javascript:void(0);" onclick="btnAdd('@item.PKID','0')">编辑</a></div>
                            <div style="float:right;padding-right:10px;"><a href="javascript:void(0);" onclick="btnDelete('@item.PKID')">删除</a></div>
                        </div>
                        <div class="line4">
                            <a href="/Advertise/ModuleProducts?AdvertiseID=@item.PKID">产品集合设置(@(manager.GetCountByAdID(item.PKID)))</a>
                        </div>
                    </div>
                </div>
            </li>
        }
        <li>
            <div class="box">
                <div class="addnew">
                    <a href="javascript:void(0);" onclick="btnAdd('0','wx-01')">+ 新增模块</a>
                </div>
            </div>
        </li>
    </ul>
</div>
<div class="fengefu"></div>
<h2>
  订单完成推广位配置
</h2>
<div class="ModuleList">
    @if (WwwAdvertiseList.Count > 0)
    {
		var items= WwwAdvertiseList.Where(i=>string.Compare("订单完成推广位",i.Name,true)==0);
        <ul>
            @foreach (var item in items)
            {
                <li>
                    <div class="box">
                        <div class="picbox">
                            <div class="line5" title="@item.Name">@item.Name</div>
                            <div class="line4">
                                <a href="/Advertise/ModuleProducts?AdvertiseID=@item.PKID">产品集合设置(@(manager.GetCountByAdID(item.PKID)))</a>
                            </div>
                        </div>
                    </div>
                </li>
            }
        </ul>
    }
    else
    {
        <div class="nodata">暂无网站车品推广位可供配置</div>
    }
</div>


<h2>
	闪购底部Banner添加
</h2>
<div class="ModuleList">
	<ul>
		@if (WWW_ShanGou.Count > 0)
		{
			foreach (var item in WWW_ShanGou)
			{
				<li>
					<div class="box">
						<div class="picbox">
							<div class="line5" title="@item.Name">@item.Name</div>
							<div class="line6">
								<div style="float:left;padding-left:10px;"><a href="javascript:void(0);" onclick="btnAdd('@item.PKID','0')">编辑</a></div>
								<div style="float:right;padding-right:10px;"><a href="javascript:void(0);" onclick="btnDelete('@item.PKID')">删除</a></div>
							</div>
						</div>
					</div>
				</li>
			}
		}
		<li>
			<div class="box">
				<div class="addnew">
					<a href="javascript:void(0);" onclick="btnAdd('0','www-shangou')">+ 新增模块</a>
				</div>
			</div>
		</li>
	</ul>
</div>

<h2>
	产品详情页Banner添加
</h2>
<div class="ModuleList">
	<ul>
		@if (WWW08.Count > 0)
		{
			foreach (var item in WWW08)
			{
				<li>
					<div class="box">
						<div class="picbox">
							<div class="line5" title="@item.Name">@item.Name</div>
							<div class="line6">
								<div style="float:left;padding-left:10px;"><a href="javascript:void(0);" onclick="btnAdd('@item.PKID','0')">编辑</a></div>
								<div style="float:right;padding-right:10px;"><a href="javascript:void(0);" onclick="btnDelete('@item.PKID')">删除</a></div>
							</div>
						</div>
					</div>
				</li>
			}
		}
		<li>
			<div class="box">
				<div class="addnew">
					<a href="javascript:void(0);" onclick="btnAdd('0','www-08')">+ 新增模块</a>
				</div>
			</div>
		</li>
	</ul>
</div>

<h2>
    电瓶页顶部Banner配置
</h2>
<div class="ModuleList">
    <ul>
        @if (BatteryBanner.Count > 0)
        {
            foreach (var item in BatteryBanner)
            {
                <li>
                    <div class="box">
                        <div class="picbox">
                            <div class="line5" title="@item.Name">@item.Name</div>
                            <div class="line6">
                                <div style="float:left;padding-left:10px;"><a href="javascript:void(0);" onclick="btnAdd('@item.PKID','0')">编辑</a></div>
                                <div style="float:right;padding-right:10px;"><a href="javascript:void(0);" onclick="btnDelete('@item.PKID')">删除</a></div>
                            </div>
                        </div>
                    </div>
                </li>
            }
        }
        <li>
            <div class="box">
                <div class="addnew">
                    <a href="javascript:void(0);" onclick="btnAdd('0', 'www-BatteryBanner')">+ 新增模块</a>
                </div>
            </div>
        </li>
    </ul>
</div>

<div id="www-QuickBanner">
    <h2>
        首页快捷方式活动Banner图配置
    </h2>
    <div class="ModuleList">
        <ul>
            @if (QuickBanner.Count > 0)
            {
                foreach (var item in QuickBanner)
                {
                    <li>
                        <div class="box">
                            <div class="picbox">
                                <div class="line5" title="@item.Name">@item.Name</div>
                                <div class="line6">
                                    <div style="float:left;padding-left:10px;"><a href="javascript:void(0);" onclick="btnAdd('@item.PKID','0')">编辑</a></div>
                                    <div style="float:right;padding-right:10px;"><a href="javascript:void(0);" onclick="btnDelete('@item.PKID')">删除</a></div>
                                </div>
                            </div>
                        </div>
                    </li>
                }
            }
            <li>
                <div class="box">
                    <div class="addnew">
                        <a href="javascript:void(0);" onclick="btnAdd('0','www-QuickBanner')">+ 新增模块</a>
                    </div>
                </div>
            </li>
        </ul>
    </div>
</div>



<div id="AddItem" style="display: none"></div>
