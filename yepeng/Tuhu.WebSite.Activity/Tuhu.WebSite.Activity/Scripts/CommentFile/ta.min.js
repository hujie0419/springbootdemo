var _Config={SetCookie:function(n,t){var i=new Date;i.setTime(i.getTime()+31104e7);document.cookie=n+"="+escape(t)+";path=/;expires="+i.toGMTString()},GetCookie:function(n){var t=document.cookie.match(new RegExp("(^| )"+n+"=([^;]*)(;|$)"));return t!=null?unescape(t[2]):null},DelCookie:function(n){var t=new Date,i;t.setTime(t.getTime()-1);i=getCookie(n);i!=null&&(document.cookie=n+"="+i+";expires="+t.toGMTString()+"; path=/")}},_H5Utils={GetQueryString:function(n){var i=new RegExp("(^|&)"+n+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(i);return t!=null?unescape(t[2]):null},IsPc:function(){return Math.min(window.screen.availWidth,window.screen.availHeight)>630},IsAndroid:function(){return navigator.userAgent.indexOf("tuhuAndroid")>=0?!0:!1},IsIOS:function(){return navigator.userAgent.indexOf("tuhuIOS")>=0?!0:!1},IsApp:function(){return!!window.isVersion},IsAppNew:function(){return this.IsAndroid()?navigator.userAgent.indexOf("tuhuAndroid")>=0:navigator.userAgent.indexOf("tuhuIOS")>=0},IsWx:function(){return navigator.userAgent.toLowerCase().match(/MicroMessenger/i)=="micromessenger"}},Ta={devices:["other iphone","Apple iPhone 6 Plus / 6s Plus","Apple iPhone 6 / 6s","Apple iPhone 4, 4s, 5, 5c, 5s","android device"],appNames:["tuhuAndroid","tuhuIOS",""],osNames:["Android","iOS"],WXSid:"WXSid",WXUid:"WXUid",userid:"",BASE_URL:"http://faxian.tuhu.dev",STATIC_URL_SPV:"https://hi.tuhu.com/collect/spv",STATIC_URL_SEVENT:"https://hi.tuhu.com/collect/sevent",eventAction:null,eventType:null,metadata:null,isFirstInTa:function(){return document.cookie.indexOf("TA")<0},handleTaData:function(n){return n.client_time=Math.floor(+new Date/1e3),document.referrer&&(n.refer=document.referrer.substr(0,512)),n.url=window.location.href.substr(0,512),n.event_action&&(n.event_action=n.event_action.substr(0,512)),n.event_category&&(n.event_category=n.event_category.substr(0,32)),n.sid=_Config.GetCookie("sid")||"",n.uuid=_Config.GetCookie("uuid")||"",this.isFirstInTa()&&(n.app_version=this.appVersion(),n.app_name=this.appName(),n.screen_resolution=this.screenResolution(),n.os_name=this.osName(),n.os_version=this.osVersion(),n.device_model=this.deviceModel(),n.lang=this.lang(),n.country=this.country(),_Config.SetCookie("TA","8868")),n},appVersion:function(){return _H5Utils.IsAppNew()?_H5Utils.IsAndroid()?"Android"+window.isVersion:window.isVersion:""},appName:function(){return _H5Utils.IsAppNew()?_H5Utils.IsAndroid()?this.appNames[0]:this.appNames[1]:this.appNames[2]},lang:function(){return navigator.language.split("-")[0]},country:function(){return navigator.language.split("-")[1]},screenResolution:function(){return window.innerWidth+"x"+window.innerHeight},osName:function(){return _H5Utils.IsAndroid()?this.osNames[0]:this.osNames[1]},osVersion:function(){return""},deviceModel:function(){if(_H5Utils.IsIOS())switch(window.innerWidth){case 414:return this.devices[1];case 375:return this.devices[2];case 320:return this.devices[3];default:return this.devices[0]}return this.devices[4]},childurl:function(){return location.href.substr(location.href.indexOf("/",8),location.href.length-location.href.indexOf("/",8))},GoAjax:function(n){var r=n.event_type=="pv"?this.STATIC_URL_SPV:this.STATIC_URL_SEVENT,t=null,i;t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");i=JSON.stringify(this.handleTaData(n));t.withCredentials=!0;t.open("POST",r,!0);t.setRequestHeader("Content-type","application/json");t.onreadystatechange=function(){if(t.readyState==4&&t.status==200)var n=eval("("+t.responseText+")")};t.send(i)},Run:function(n,t,i,r){var u,f;this.eventAction=n;this.eventType=t;this.userid="";i!=""&&i!=undefined&&r!=""&&r!=undefined&&(this.metadata='{"'+i+'":"'+r+'"}');try{u="tuhu_wap";_H5Utils.IsAndroid()&&(u="h5_android_app");_H5Utils.IsIOS()&&(u="h5_ios_app");_H5Utils.IsWx()&&(u="weixin");f={app_id:u,event_action:this.isFirstInTa()?"get_info":this.eventAction,event_category:this.childurl(),user_id:this.userid,level:"info",event_type:this.isFirstInTa()?"get_info":this.eventType,metadata:this.metadata};this.GoAjax(f)}catch(e){console.log(e)}}};