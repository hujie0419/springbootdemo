webpackJsonp([4],{"+skl":function(e,t){},"+xYh":function(e,t){},"9Q9G":function(e,t){},HkXY:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),i={props:{name:{type:String}},methods:{logout:function(){this.$emit("logout")}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"},[e._m(0),e._v(" "),n("div",{staticClass:"header-aside"},[n("Dropdown",{on:{"on-click":e.logout}},[n("a",{staticClass:"header-aside-main",attrs:{href:"javascript:void(0)"}},[n("Icon",{staticClass:"main-icon",attrs:{type:"ios-person"}}),e._v("\n          "+e._s(e.name)+"\n          "),n("Icon",{attrs:{type:"arrow-down-b"}})],1),e._v(" "),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",[e._v("退出登录")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"headerlogo"},[t("img",{staticClass:"header-logo-line",attrs:{src:"static/logo.png"}}),this._v(" "),t("div",{staticClass:"header-logo-title"},[t("h3",[this._v("途虎运营系统")]),this._v(" "),t("h4",[this._v("setting.tuhu.cn")])])])}]};var s=n("VU/8")(i,o,!1,function(e){n("pDZY")},null,null).exports,r={name:"setting-menu",props:{menus:{type:Array}},data:function(){return{searchVal:"",filteredMenus:[],openedmenus:[],shrinked:!1,activename:""}},watch:{$route:function(){this.setActiveName(this.$router.currentRoute.name)}},mounted:function(){this.filteredMenus=this.menus,this.setActiveName(this.$router.currentRoute.name)},methods:{goto:function(e){this.$router.push({name:e})},fliter:function(){var e=this.searchVal;this.filteredMenus=this.menus.filter(function(t){return t.name.indexOf(e)>=0}),this.updateOpenedMenus(this.util.array.select(this.filteredMenus,function(e){return e.key}))},updateOpenedMenus:function(e,t){this.openedmenus=e,t&&(this.activename=t),this.$nextTick(function(){this.$refs.orangeMenu.updateOpened(),this.$refs.orangeMenu.updateActiveName()})},setActiveName:function(e){var t;this.menus.forEach(function(n){n.children.forEach(function(a){a.key===e&&(t=n.key)})}),this.updateOpenedMenus([t],e)}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{nav:!e.shrinked}},[n("Input",{staticClass:"search",attrs:{icon:"ios-search",placeholder:"筛选一级目录"},on:{"on-enter":e.fliter,"on-click":e.fliter},model:{value:e.searchVal,callback:function(t){e.searchVal=t},expression:"searchVal"}}),e._v(" "),n("Menu",{ref:"orangeMenu",attrs:{width:"210px","open-names":e.openedmenus,"active-name":e.activename},on:{"on-select":e.goto}},e._l(e.filteredMenus,function(t,a){return n("Submenu",{key:a,attrs:{name:t.key}},[n("template",{slot:"title"},[n("Icon",{attrs:{type:t.icon}}),e._v("\n                "+e._s(t.name)+"\n            ")],1),e._v(" "),e._l(t.children,function(t,a){return n("MenuItem",{key:a,attrs:{name:t.key}},[e._v("\n            "+e._s(t.name)+"\n            ")])})],2)})),e._v(" "),n("Button",{directives:[{name:"show",rawName:"v-show",value:e.shrinked,expression:"shrinked"}],staticClass:"hide",on:{click:function(t){e.shrinked=!e.shrinked}}},[e._v("收起")])],1)},staticRenderFns:[]};var c={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"footer"},[t("div",{staticClass:"footer-data"},[t("span",[this._v("所有内容为途虎养车网商业机密信息，切勿泄漏。版权所有 途虎养车网 2011-2015")])])])}]};var d={name:"App",data:function(){return{user:{name:""}}},computed:{menus:function(){return this.$store.state.app.menus},username:function(){return this.$store.state.user.name}},components:{settingheader:s,settingmenu:n("VU/8")(r,l,!1,function(e){n("HkXY")},null,null).exports,settingfooter:n("VU/8")({},c,!1,function(e){n("ROvl")},null,null).exports},methods:{logout:function(){var e=location.hostname.replace("yunying","yewu").replace("setting","yewu");window.location.href=location.protocol+"//"+e+"/Account/LogOff"}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("settingheader",{attrs:{name:e.username},on:{logout:e.logout}}),e._v(" "),n("settingmenu",{attrs:{menus:e.menus}}),e._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"real-content"},[n("router-view",{key:e.$route.fullPath})],1),e._v(" "),n("div",{staticStyle:{height:"50px"}}),e._v(" "),n("settingfooter")],1)],1)},staticRenderFns:[]};var m=n("VU/8")(d,u,!1,function(e){n("+xYh")},null,null).exports,p=n("BTaQ"),h=n.n(p),f=(n("+skl"),n("9Q9G"),n("mvHQ")),k=n.n(f),v=n("//Fk"),y=n.n(v),b=n("Zrlr"),g=n.n(b),I=n("wxAW"),_=n.n(I),T=n("mtWM"),w=n.n(T),x=function(){function e(t,n){g()(this,e),this.message=t,this.loadingbar=n,this.ajax=w.a,this.array=new S}return _()(e,[{key:"initialize",value:function(){var e=this;this.ajax.interceptors.request.use(function(t){return e.loadingbar.start(),t},function(t){return e.loadingbar.error(),y.a.reject(t)}),this.ajax.interceptors.response.use(function(t){console.log(t);var n=/Msg[\s|\S]*[-]*.*IsPower/;return n.test(t.data)&&e.message.error({content:t.data.match(n)[0].replace("Msg:","").replace(",IsPower",""),duration:10,closable:!0}),e.loadingbar.finish(),t},function(t){e.loadingbar.error(),e.message.error({content:k()(t.response.data),duration:10,closable:!0})})}},{key:"setTitile",value:function(e){e=e||"",window.document.title=e}},{key:"getAxiosInstance",value:function(){return w.a.create()}},{key:"deepCopy",value:function(e){return JSON.parse(k()(e))}}]),e}(),S=function(){function e(){g()(this,e)}return _()(e,[{key:"select",value:function(e,t){var n=[];return e.forEach(function(e,a){n.push(t(e))}),n}}]),e}(),B=x,$=n("NYxO"),E={namespaced:!0,state:{menu:{menus:[],openedmenus:[],shrinked:[]},user:{name:"",permission:[]}},mutations:{init:function(e,t){console.log(t),e.menus=t}}},D={namespaced:!0,state:{name:"",permissions:[]},mutations:{logout:function(e){},init:function(e,t){e.name=t.name,e.permissions=t.permissions}}};a.default.use($.a);var M=new $.a.Store({state:{},mutations:{},actions:{},modules:{app:E,user:D}}),V=[{key:"1",name:"黑名单配置",children:[{key:"PintuanBlockList",name:"拼团黑名单配置"}]}];a.default.use(h.a),a.default.config.productionTip=!1,a.default.prototype.$Loading.config({color:"#2ca9e1",failedColor:"#c9171e",height:2});var C=new B(a.default.prototype.$Message,a.default.prototype.$Loading);C.initialize(),a.default.prototype.ajax=C.ajax,a.default.prototype.util=C,C.ajax.get("/auth/GetBasicInformantion").then(function(e){if(e.data.success){M.commit("user/init",e.data.user),M.commit("app/init",V);var t=n("YaEn").default;t.beforeEach(function(e,t,n){(C.loadingbar.start(),C.setTitile(e.meta.title),console.log("pat"+e.meta.authpath),e.meta.authpath)?C.getAxiosInstance().get("/auth/haspower?path="+e.meta.authpath).then(function(e){e.data.success&&e.data.result?n():n({path:"/403"})}).catch(function(e){console.log(e),C.loadingbar.error(),n({path:"/500"})}):n()}),t.afterEach(function(e){console.log("finish"),C.loadingbar.finish()}),new a.default({el:"#app",router:t,store:M,components:{App:m},template:"<App/>"})}else{var i=location.hostname.replace("yunying","yewu").replace("setting","yewu");window.location.href=location.protocol+"//"+i+"/Account/LogOn?ReturnUrl="+location.href}})},ROvl:function(e,t){},YaEn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),i=n("/ocq"),o={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n    欢迎访问！\n")])},staticRenderFns:[]},s=n("VU/8")(null,o,!1,null,null,null).exports,r={data:function(){var e=this;return{blockSystemDictionary:{Pintuan:"拼团"},blockTypeDictionary:{1:"IP地址",2:"用户手机号",4:"设备号",8:"用户Id",16:"支付账号"},query:{blockSystem:"Pintuan",blockType:"1"},table:{pageIndex:1,totalSize:1,list:[],cols:[{title:"黑名单类型",key:"BlockType",render:function(t,n){return t("span",e.blockTypeDictionary[n.row.BlockType])}},{title:"黑名单值",key:"BlockValue"},{title:"黑名单开始时间",key:"BlockBeginTime"},{title:"黑名单结束时间",key:"BlockEndTime"},{title:"拉黑原因",key:"Reason"},{title:"备注",key:"Remark"},{title:"更新人",key:"UpdateBy"}],loading:!0},addItem:{showDialog:!1,item:{blockType:"1",blockValue:"",blockBeginTime:{date:"",time:""},blockEndTime:{date:"",time:""},reason:"",remark:""},add:function(){if(e.addItem.item.blockValue){var t=e;e.util.ajax.post("/BlockListConfig/Add",{BlockSystem:e.query.blockSystem,BlockValue:e.addItem.item.blockValue,BlockType:e.addItem.item.blockType,Reason:e.addItem.item.reason,Remark:e.addItem.item.remark,BlockBeginTime:e.addItem.item.blockBeginTime.date+" "+e.addItem.item.blockBeginTime.time,BlockEndTime:e.addItem.item.blockEndTime.date+" "+e.addItem.item.blockEndTime.time}).then(function(e){e.data.Status>0?(console.log("Success"),t.addItem.item.blockType="1",t.addItem.item.blockValue="",t.addItem.item.reason="",t.addItem.item.remark="",t.addItem.item.blockBeginTime.date="",t.addItem.item.blockBeginTime.time="",t.addItem.item.blockEndTime.date="",t.addItem.item.blockEndTime.time="",t.loadData(1)):t.util.message.error({top:100,duration:3,content:e.data.ErrorMsg})})}else e.util.message.error({top:100,duration:3,content:"被拉黑的值不能为空"})},cancel:function(){e.addItem.showDialog=!1}}}},created:function(){this.$route.params.blockSystem&&(this.query.blockSystem=this.$route.params.blockSystem)},methods:{loadData:function(e){e||(e=1),this.table.loading=!0;var t=this;this.util.ajax.get("/BlockListConfig/List?blockSystem="+t.query.blockSystem+"&blockType="+t.query.blockType+"&pageIndex="+e+"&pageSize=20").then(function(n){t.table.loading=!1,n.data&&n.data.Status>0&&(t.table.list=n.data.Data,t.table.totalSize=n.data.TotalSize,t.table.pageIndex=e)})},onAdd:function(){this.addItem.showDialog=!0}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",[e._v(" "+e._s(e.blockSystemDictionary[e.query.blockSystem])+"黑名单配置")]),e._v(" "),n("div",[n("Form",{attrs:{inline:""}},[n("FormItem",[n("Select",{staticStyle:{width:"140px"},attrs:{filterable:""},on:{"on-change":function(t){e.loadData(1)}},model:{value:e.query.blockType,callback:function(t){e.$set(e.query,"blockType",t)},expression:"query.blockType"}},e._l(Object.keys(e.blockTypeDictionary),function(t){return n("Option",{key:t,attrs:{value:t}},[e._v(e._s(e.blockTypeDictionary[t]))])}))],1),e._v(" "),n("Button",{attrs:{type:"warning"},on:{click:function(t){e.onAdd()}}},[e._v("新增黑名单")])],1)],1),e._v(" "),n("Table",{staticStyle:{"font-family":"微软雅黑","line-height":"1.4em"},attrs:{border:"",strip:"",loading:e.table.loading,columns:e.table.cols,data:e.table.list}}),e._v(" "),n("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[n("div",{staticStyle:{float:"right"}},[n("Page",{attrs:{total:e.table.totalSize,current:e.table.pageIndex,"show-total":""},on:{"on-change":e.loadData}})],1)]),e._v(" "),n("Modal",{attrs:{title:"新增黑名单"},on:{"on-ok":e.addItem.add,"on-cancel":e.addItem.cancel},model:{value:e.addItem.showDialog,callback:function(t){e.$set(e.addItem,"showDialog",t)},expression:"addItem.showDialog"}},[n("Form",{attrs:{model:e.addItem.item,"label-width":82}},[n("FormItem",{attrs:{label:"黑名单类型"}},[n("Select",{staticStyle:{width:"140px"},attrs:{filterable:""},model:{value:e.addItem.item.blockType,callback:function(t){e.$set(e.addItem.item,"blockType",t)},expression:"addItem.item.blockType"}},e._l(Object.keys(e.blockTypeDictionary),function(t){return n("Option",{key:t,attrs:{value:t}},[e._v(e._s(e.blockTypeDictionary[t]))])}))],1),e._v(" "),n("FormItem",{attrs:{label:"黑名单值"}},[n("Input",{attrs:{placeholder:"要拉入黑名单的值",required:""},model:{value:e.addItem.item.blockValue,callback:function(t){e.$set(e.addItem.item,"blockValue",t)},expression:"addItem.item.blockValue"}})],1),e._v(" "),n("FormItem",{attrs:{label:"开始时间（不设置则立即生效）"}},[n("DatePicker",{attrs:{type:"date",placeholder:"Select date"},model:{value:e.addItem.item.blockBeginTime.date,callback:function(t){e.$set(e.addItem.item.blockBeginTime,"date",t)},expression:"addItem.item.blockBeginTime.date"}}),e._v(" "),n("span",[e._v(" - ")]),e._v(" "),n("TimePicker",{attrs:{type:"time",placeholder:"Select time"},model:{value:e.addItem.item.blockBeginTime.time,callback:function(t){e.$set(e.addItem.item.blockBeginTime,"time",t)},expression:"addItem.item.blockBeginTime.time"}})],1),e._v(" "),n("FormItem",{attrs:{label:"结束时间（不设置则永久生效）"}},[n("DatePicker",{attrs:{type:"date",placeholder:"Select date"},model:{value:e.addItem.item.blockEndTime.date,callback:function(t){e.$set(e.addItem.item.blockEndTime,"date",t)},expression:"addItem.item.blockEndTime.date"}}),e._v(" "),n("span",[e._v(" - ")]),e._v(" "),n("TimePicker",{attrs:{type:"time",placeholder:"Select time"},model:{value:e.addItem.item.blockEndTime.time,callback:function(t){e.$set(e.addItem.item.blockEndTime,"time",t)},expression:"addItem.item.blockEndTime.time"}})],1),e._v(" "),n("FormItem",{attrs:{label:"拉黑原因"}},[n("Input",{attrs:{placeholder:"拉黑原因"},model:{value:e.addItem.item.reason,callback:function(t){e.$set(e.addItem.item,"reason",t)},expression:"addItem.item.reason"}})],1),e._v(" "),n("FormItem",{attrs:{label:"备注"}},[n("Input",{attrs:{placeholder:"备注"},model:{value:e.addItem.item.remark,callback:function(t){e.$set(e.addItem.item,"remark",t)},expression:"addItem.item.remark"}})],1)],1)],1)],1)},staticRenderFns:[]},c=n("VU/8")(r,l,!1,null,null,null).exports;n.d(t,"page404",function(){return d}),n.d(t,"page403",function(){return u}),n.d(t,"page500",function(){return m}),a.default.use(i.a);var d={path:"/*",name:"error-404",meta:{title:"404-页面不存在"},component:function(){return n.e(0).then(n.bind(null,"LWjT"))}},u={path:"/403",meta:{title:"403-权限不足"},name:"error-403",component:function(){return n.e(1).then(n.bind(null,"J7+d"))}},m={path:"/500",meta:{title:"500-服务端错误"},name:"error-500",component:function(){return n.e(2).then(n.bind(null,"0Gql"))}};t.default=new i.a({routes:[{path:"/",name:"index",component:s,meta:{title:"首页"}},{path:"/BlockList/Pintuan",name:"PintuanBlockList",component:c,meta:{title:"拼团黑名单配置"}},{path:"/BlockList/:blockSystem",name:"BlockList",component:c,meta:{title:"黑名单配置"}},u,m,d]})},pDZY:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.35c796745d37461125d8.js.map