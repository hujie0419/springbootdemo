function Base64(){_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.encode=function(n){var f="",e,t,i,s,h,o,r,u=0;for(n=_utf8_encode(n);u<n.length;)e=n.charCodeAt(u++),t=n.charCodeAt(u++),i=n.charCodeAt(u++),s=e>>2,h=(e&3)<<4|t>>4,o=(t&15)<<2|i>>6,r=i&63,isNaN(t)?o=r=64:isNaN(i)&&(r=64),f=f+_keyStr.charAt(s)+_keyStr.charAt(h)+_keyStr.charAt(o)+_keyStr.charAt(r);return f};this.decode=function(n){var t="",e,o,s,h,u,r,f,i=0;for(n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<n.length;)h=_keyStr.indexOf(n.charAt(i++)),u=_keyStr.indexOf(n.charAt(i++)),r=_keyStr.indexOf(n.charAt(i++)),f=_keyStr.indexOf(n.charAt(i++)),e=h<<2|u>>4,o=(u&15)<<4|r>>2,s=(r&3)<<6|f,t=t+String.fromCharCode(e),r!=64&&(t=t+String.fromCharCode(o)),f!=64&&(t=t+String.fromCharCode(s));return _utf8_decode(t)};_utf8_encode=function(n){var i,r,t;for(n=n.replace(/\r\n/g,"\n"),i="",r=0;r<n.length;r++)t=n.charCodeAt(r),t<128?i+=String.fromCharCode(t):t>127&&t<2048?(i+=String.fromCharCode(t>>6|192),i+=String.fromCharCode(t&63|128)):(i+=String.fromCharCode(t>>12|224),i+=String.fromCharCode(t>>6&63|128),i+=String.fromCharCode(t&63|128));return i};_utf8_decode=function(n){for(var r="",t=0,i=c1=c2=0;t<n.length;)i=n.charCodeAt(t),i<128?(r+=String.fromCharCode(i),t++):i>191&&i<224?(c2=n.charCodeAt(t+1),r+=String.fromCharCode((i&31)<<6|c2&63),t+=2):(c2=n.charCodeAt(t+1),c3=n.charCodeAt(t+2),r+=String.fromCharCode((i&15)<<12|(c2&63)<<6|c3&63),t+=3);return r}}!function(n,t){"function"==typeof define&&(define.amd||define.cmd)?define(function(){return t(n)}):t(n,!0)}(this,function(n,t){function i(t,i,r){n.WeixinJSBridge?WeixinJSBridge.invoke(t,rt(i),function(n){ut(t,n,r)}):v(t,r)}function c(t,i,r){n.WeixinJSBridge?WeixinJSBridge.on(t,function(n){r&&r.trigger&&r.trigger(n);ut(t,n,i)}):r?v(t,r):v(t,i)}function rt(n){return n=n||{},n.appId=f.appId,n.verifyAppId=f.appId,n.verifySignType="sha1",n.verifyTimestamp=f.timestamp+"",n.verifyNonceStr=f.nonceStr,n.verifySignature=f.signature,n}function ht(n){return{timeStamp:n.timestamp+"",nonceStr:n.nonceStr,package:n.package,paySign:n.paySign,signType:n.signType||"SHA1"}}function ut(n,t,i){var r,u,e;switch(delete t.err_code,delete t.err_desc,delete t.err_detail,r=t.errMsg,r||(r=t.err_msg,delete t.err_msg,r=ct(n,r),t.errMsg=r),i=i||{},i._complete&&(i._complete(t),delete i._complete),r=t.errMsg||"",f.debug&&!i.isInnerInvoke&&alert(JSON.stringify(t)),u=r.indexOf(":"),e=r.substring(u+1)){case"ok":i.success&&i.success(t);break;case"cancel":i.cancel&&i.cancel(t);break;default:i.fail&&i.fail(t)}i.complete&&i.complete(t)}function ct(n,t){var i,u,r=n,f=p[r];return f&&(r=f),i="ok",t&&(u=t.indexOf(":"),i=t.substring(u+1),"confirm"==i&&(i="ok"),"failed"==i&&(i="fail"),-1!=i.indexOf("failed_")&&(i=i.substring(7)),-1!=i.indexOf("fail_")&&(i=i.substring(5)),i=i.replace(/_/g," "),i=i.toLowerCase(),("access denied"==i||"no permission to execute"==i)&&(i="permission denied"),"config"==r&&"function not exist"==i&&(i="ok"),""==i&&(i="fail")),t=r+":"+i}function ft(n){var t,r,f,i;if(n){for(t=0,r=n.length;r>t;++t)f=n[t],i=u[f],i&&(n[t]=i);return n}}function v(n,t){if(!(!f.debug||t&&t.isInnerInvoke)){var i=p[n];i&&(n=i);t&&t._complete&&delete t._complete;console.log('"'+n+'",',t||"")}}function lt(){0!=r.preVerifyState&&(ot||st||f.debug||"6.0.2">k||r.systemType<0||tt||(tt=!0,r.appId=f.appId,r.initTime=s.initEndTime-s.initStartTime,r.preVerifyTime=s.preVerifyEndTime-s.preVerifyStartTime,a.getNetworkType({isInnerInvoke:!0,success:function(n){var t,i;r.networkType=n.networkType;t="http://open.weixin.qq.com/sdk/report?v="+r.version+"&o="+r.preVerifyState+"&s="+r.systemType+"&c="+r.clientVersion+"&a="+r.appId+"&n="+r.networkType+"&i="+r.initTime+"&p="+r.preVerifyTime+"&u="+r.url;i=new Image;i.src=t}})))}function y(){return(new Date).getTime()}function et(t){g&&(n.WeixinJSBridge?t():w.addEventListener&&w.addEventListener("WeixinJSBridgeReady",t,!1))}function at(){a.invoke||(a.invoke=function(t,i,r){n.WeixinJSBridge&&WeixinJSBridge.invoke(t,rt(i),r)},a.on=function(t,i){n.WeixinJSBridge&&WeixinJSBridge.on(t,i)})}var u,p,w,l,o,d,ot,st,g,b,nt,k,tt,it,s,r,f,e,h,a;if(!n.jWeixin)return u={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest"},p=function(){var n,t={};for(n in u)t[u[n]]=n;return t}(),w=n.document,l=w.title,o=navigator.userAgent.toLowerCase(),d=navigator.platform.toLowerCase(),ot=!(!d.match("mac")&&!d.match("win")),st=-1!=o.indexOf("wxdebugger"),g=-1!=o.indexOf("micromessenger"),b=-1!=o.indexOf("android"),nt=-1!=o.indexOf("iphone")||-1!=o.indexOf("ipad"),k=function(){var n=o.match(/micromessenger\/(\d+\.\d+\.\d+)/)||o.match(/micromessenger\/(\d+\.\d+)/);return n?n[1]:""}(),tt=!1,it=!1,s={initStartTime:y(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},r={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",preVerifyState:1,systemType:nt?1:b?2:-1,clientVersion:k,url:encodeURIComponent(location.href)},f={},e={_completes:[]},h={state:0,data:{}},et(function(){s.initEndTime=y()}),a={config:function(n){f=n;v("config",n);var t=f.check===!1?!1:!0;et(function(){var o,n,c;if(t)i(u.config,{verifyJsApiList:ft(f.jsApiList)},function(){e._complete=function(n){s.preVerifyEndTime=y();h.state=1;h.data=n};e.success=function(){r.preVerifyState=0};e.fail=function(n){e._fail?e._fail(n):h.state=-1};var n=e._completes;return n.push(function(){lt()}),e.complete=function(){for(var t=0,i=n.length;i>t;++t)n[t]();e._completes=[]},e}()),s.preVerifyStartTime=y();else{for(h.state=1,o=e._completes,n=0,c=o.length;c>n;++n)o[n]();e._completes=[]}});f.beta&&at()},ready:function(n){0!=h.state?n():(e._completes.push(n),!g&&f.debug&&n())},error:function(n){"6.0.2">k||it||(it=!0,-1==h.state?n(h.data):e._fail=n)},checkJsApi:function(n){var t=function(n){var t,r,i=n.checkResult;for(t in i)r=p[t],r&&(i[r]=i[t],delete i[t]);return n};i("checkJsApi",{jsApiList:ft(n.jsApiList)},function(){return n._complete=function(n){if(b){var i=n.checkResult;i&&(n.checkResult=JSON.parse(i))}n=t(n)},n}())},onMenuShareTimeline:function(n){c(u.onMenuShareTimeline,{complete:function(){i("shareTimeline",{title:n.title||l,desc:n.title||l,img_url:n.imgUrl||"",link:n.link||location.href,type:n.type||"link",data_url:n.dataUrl||""},n)}},n)},onMenuShareAppMessage:function(n){c(u.onMenuShareAppMessage,{complete:function(){i("sendAppMessage",{title:n.title||l,desc:n.desc||"",link:n.link||location.href,img_url:n.imgUrl||"",type:n.type||"link",data_url:n.dataUrl||""},n)}},n)},onMenuShareQQ:function(n){c(u.onMenuShareQQ,{complete:function(){i("shareQQ",{title:n.title||l,desc:n.desc||"",img_url:n.imgUrl||"",link:n.link||location.href},n)}},n)},onMenuShareWeibo:function(n){c(u.onMenuShareWeibo,{complete:function(){i("shareWeiboApp",{title:n.title||l,desc:n.desc||"",img_url:n.imgUrl||"",link:n.link||location.href},n)}},n)},onMenuShareQZone:function(n){c(u.onMenuShareQZone,{complete:function(){i("shareQZone",{title:n.title||l,desc:n.desc||"",img_url:n.imgUrl||"",link:n.link||location.href},n)}},n)},startRecord:function(n){i("startRecord",{},n)},stopRecord:function(n){i("stopRecord",{},n)},onVoiceRecordEnd:function(n){c("onVoiceRecordEnd",n)},playVoice:function(n){i("playVoice",{localId:n.localId},n)},pauseVoice:function(n){i("pauseVoice",{localId:n.localId},n)},stopVoice:function(n){i("stopVoice",{localId:n.localId},n)},onVoicePlayEnd:function(n){c("onVoicePlayEnd",n)},uploadVoice:function(n){i("uploadVoice",{localId:n.localId,isShowProgressTips:0==n.isShowProgressTips?0:1},n)},downloadVoice:function(n){i("downloadVoice",{serverId:n.serverId,isShowProgressTips:0==n.isShowProgressTips?0:1},n)},translateVoice:function(n){i("translateVoice",{localId:n.localId,isShowProgressTips:0==n.isShowProgressTips?0:1},n)},chooseImage:function(n){i("chooseImage",{scene:"1|2",count:n.count||9,sizeType:n.sizeType||["original","compressed"],sourceType:n.sourceType||["album","camera"]},function(){return n._complete=function(n){if(b){var t=n.localIds;t&&(n.localIds=JSON.parse(t))}},n}())},previewImage:function(n){i(u.previewImage,{current:n.current,urls:n.urls},n)},uploadImage:function(n){i("uploadImage",{localId:n.localId,isShowProgressTips:0==n.isShowProgressTips?0:1},n)},downloadImage:function(n){i("downloadImage",{serverId:n.serverId,isShowProgressTips:0==n.isShowProgressTips?0:1},n)},getNetworkType:function(n){var t=function(n){var t,i,r,u=n.errMsg;if(n.errMsg="getNetworkType:ok",t=n.subtype,delete n.subtype,t)n.networkType=t;else switch(i=u.indexOf(":"),r=u.substring(i+1)){case"wifi":case"edge":case"wwan":n.networkType=r;break;default:n.errMsg="getNetworkType:fail"}return n};i("getNetworkType",{},function(){return n._complete=function(n){n=t(n)},n}())},openLocation:function(n){i("openLocation",{latitude:n.latitude,longitude:n.longitude,name:n.name||"",address:n.address||"",scale:n.scale||28,infoUrl:n.infoUrl||""},n)},getLocation:function(n){n=n||{};i(u.getLocation,{type:n.type||"wgs84"},function(){return n._complete=function(n){delete n.type},n}())},hideOptionMenu:function(n){i("hideOptionMenu",{},n)},showOptionMenu:function(n){i("showOptionMenu",{},n)},closeWindow:function(n){n=n||{};i("closeWindow",{},n)},hideMenuItems:function(n){i("hideMenuItems",{menuList:n.menuList},n)},showMenuItems:function(n){i("showMenuItems",{menuList:n.menuList},n)},hideAllNonBaseMenuItem:function(n){i("hideAllNonBaseMenuItem",{},n)},showAllNonBaseMenuItem:function(n){i("showAllNonBaseMenuItem",{},n)},scanQRCode:function(n){n=n||{};i("scanQRCode",{needResult:n.needResult||0,scanType:n.scanType||["qrCode","barCode"]},function(){return n._complete=function(n){var i,t;nt&&(i=n.resultStr,i&&(t=JSON.parse(i),n.resultStr=t&&t.scan_code&&t.scan_code.scan_result))},n}())},openProductSpecificView:function(n){i(u.openProductSpecificView,{pid:n.productId,view_type:n.viewType||0,ext_info:n.extInfo},n)},addCard:function(n){for(var r,e,o=n.cardList,s=[],t=0,f=o.length;f>t;++t)r=o[t],e={card_id:r.cardId,card_ext:r.cardExt},s.push(e);i(u.addCard,{card_list:s},function(){return n._complete=function(n){var r,u,t,i=n.card_list;if(i){for(i=JSON.parse(i),r=0,u=i.length;u>r;++r)t=i[r],t.cardId=t.card_id,t.cardExt=t.card_ext,t.isSuccess=t.is_succ?!0:!1,delete t.card_id,delete t.card_ext,delete t.is_succ;n.cardList=i;delete n.card_list}},n}())},chooseCard:function(n){i("chooseCard",{app_id:f.appId,location_id:n.shopId||"",sign_type:n.signType||"SHA1",card_id:n.cardId||"",card_type:n.cardType||"",card_sign:n.cardSign,time_stamp:n.timestamp+"",nonce_str:n.nonceStr},function(){return n._complete=function(n){n.cardList=n.choose_card_info;delete n.choose_card_info},n}())},openCard:function(n){for(var r,e,o=n.cardList,s=[],t=0,f=o.length;f>t;++t)r=o[t],e={card_id:r.cardId,code:r.code},s.push(e);i(u.openCard,{card_list:s},n)},chooseWXPay:function(n){i(u.chooseWXPay,ht(n),n)}},t&&(n.wx=n.jWeixin=a),a});var APPShare={Data:"",SenderID:"",Title:"途虎养车-1分钱洗车",Msg:"一分钱洗车，换轮胎、做保养、查违章、汽车美容",GetQueryString:function(n){var i=new RegExp("(^|&)"+n+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(i);return t!=null?unescape(t[2]).toLocaleLowerCase()!="tuhu"?unescape(t[2]):null:null},base64encode:function(n){var t=new Base64;return t.encode(n)},base64decode:function(n){var t=new Base64;return t.decode(n)},close:function(n){return $(n).parent().animate({top:"-"+$(".load-tip").height()+"px"},800),$(".banner").animate({"margin-top":"0px"},400),$(window).scroll(function(){$(n).parent().hide()}),!1},Init:function(){var t=APPShare.GetQueryString("utm_source"),i;if(t!=""&&t!=undefined){t!="Sync"&&(i="<div class='load-tip'> <span class='tuhu-logo'><img src='/Content/imgs/detail/drawable-hdpi/hu.png'><\/span><span class='tuhu-title'>途虎养车<\/span><span class='load-dele' onclick='APPShare.close(this)'><img src='/Content/imgs/detail/drawable-hdpi/close.png'><\/span><span class='load-tap' onclick='APPShare.DownApp()'>立即打开<\/span><\/div>",$("section.boxContent").prepend(i),$(".pageCategories").empty());$(".boxContent").children(".imgBox").hasClass("banner")?$(".boxContent").children(".imgBox").addClass("martop44"):$(".boxContent").children(".imgBox").hasClass("theme")&&$(".boxContent").children(".imgBox").addClass("martop48");$(".attend-argu").show();$("#xgyd").find(".relateds").each(function(){var n=$(this),i=n.attr("href")+"&utm_source="+t;n.attr("href",i)});APPShare.SenderID=APPShare.GetQueryString("senderid");(APPShare.SenderID==undefined||APPShare.SenderID=="")&&(APPShare.SenderID="SenderID");APPShare.Title="下载途虎APP领百元红包";APPShare.Msg="新用户还有一分钱洗车哟";var f=APPShare.GetQueryString("type"),r=APPShare.GetQueryString("id"),u=location.href.split("?")[0]+"?id="+r+"&bgColor=%2523ffffff&textColor=%2523333333",n={};n.Type=2;n.URL=u;n.shareUrl=location.href;n.shareTitle=document.title;n.shareDescription="";n.sharePicture="";n.isShowShareIcon=!1;APPShare.Data='{"data":"'+APPShare.base64encode(JSON.stringify(n))+'"}';APPShare.GetToUrl()}},DownApp:function(){window.GoToUrl&&(ga("send","event","toutiao_detail","click_open","open"),Ta.Run("home_click_打开app","event"),location.href=window.GoToUrl)},OpenAppComment:function(){window.GoToUrl&&(ga("send","event","toutiao_detail","click_joincomment"),Ta.Run("home_click_参与头条评论","event"),location.href=window.GoToUrl)},GetToUrl:function(){APPShare.Url=location.href;var n={inapp_data:APPShare.Data,sender_id:APPShare.SenderID,download_title:APPShare.Title,download_msg:APPShare.Msg},t=JSON.stringify(n);$.ajax({url:"https://fds.so/v2/url/b432168cf0b44c7e",type:"POST",data:t,xhrFields:{withCredentials:!0},success:function(n){n&&(window.GoToUrl=n.url)},error:function(){}})}};APPShare.Init();